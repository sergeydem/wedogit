!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,s){return void 0===s&&(s="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(s),s}:e(jQuery)}(function(e){"use strict";var t=e(document),s=e(window),i=["a","e","i","o","u","n","c","y"],l=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g],n=function(t,s){this.element=t,this.$element=e(t),this.state={multiple:!!this.$element.attr("multiple"),enabled:!1,opened:!1,currValue:-1,selectedIdx:-1,highlightedIdx:-1},this.eventTriggers={open:this.open,close:this.close,destroy:this.destroy,refresh:this.refresh,init:this.init},this.init(s)};n.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(e){for(var t=l.length;t--;)e=e.toLowerCase().replace(l[t],i[t]);return e},format:function(e){var t=arguments;return(""+e).replace(/\{(?:(\d+)|(\w+))\}/g,function(e,s,i){return i&&t[1]?t[1][i]:t[s]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(t,s){var i=s.element,l=s.options["on"+t],n=[i].concat([].slice.call(arguments).slice(1));e.isFunction(l)&&l.apply(i,n),e(i).trigger("selectric-"+this.toDash(t),n)},arrayToClassname:function(t){var s=e.grep(t,function(e){return!!e});return e.trim(s.join(" "))}},init:function(t){var s=this;if(s.options=e.extend(!0,{},e.fn.selectric.defaults,s.options,t),s.utils.triggerCallback("BeforeInit",s),s.destroy(!0),s.options.disableOnMobile&&s.utils.isMobile())s.disableOnMobile=!0;else{s.classes=s.getClassNames();var i=e("<input/>",{class:s.classes.input,readonly:s.utils.isMobile()}),l=e("<div/>",{class:s.classes.items,tabindex:-1}),n=e("<div/>",{class:s.classes.scroll}),a=e("<div/>",{class:s.classes.prefix,html:s.options.arrowButtonMarkup}),o=e("<span/>",{class:"label"}),r=s.$element.wrap("<div/>").parent().append(a.prepend(o),l,i),u=e("<div/>",{class:s.classes.hideselect});s.elements={input:i,items:l,itemsScroll:n,wrapper:a,label:o,outerWrapper:r},s.options.nativeOnMobile&&s.utils.isMobile()&&(s.elements.input=void 0,u.addClass(s.classes.prefix+"-is-native"),s.$element.on("change",function(){s.refresh()})),s.$element.on(s.eventTriggers).wrap(u),s.originalTabindex=s.$element.prop("tabindex"),s.$element.prop("tabindex",-1),s.populate(),s.activate(),s.utils.triggerCallback("Init",s)}},activate:function(){var e=this.elements.items.closest(":visible").children(":hidden").addClass(this.classes.tempshow),t=this.$element.width();e.removeClass(this.classes.tempshow),this.utils.triggerCallback("BeforeActivate",this),this.elements.outerWrapper.prop("class",this.utils.arrayToClassname([this.classes.wrapper,this.$element.prop("class").replace(/\S+/g,this.classes.prefix+"-$&"),this.options.responsive?this.classes.responsive:""])),this.options.inheritOriginalWidth&&t>0&&this.elements.outerWrapper.width(t),this.unbindEvents(),this.$element.prop("disabled")?(this.elements.outerWrapper.addClass(this.classes.disabled),this.elements.input&&this.elements.input.prop("disabled",!0)):(this.state.enabled=!0,this.elements.outerWrapper.removeClass(this.classes.disabled),this.$li=this.elements.items.removeAttr("style").find("li"),this.bindEvents()),this.utils.triggerCallback("Activate",this)},getClassNames:function(){var t=this,s=t.options.customClass,i={};return e.each("Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Below Scroll Group GroupLabel".split(" "),function(e,l){var n=s.prefix+l;i[l.toLowerCase()]=s.camelCase?n:t.utils.toDash(n)}),i.prefix=s.prefix,i},setLabel:function(){var t=this,s=t.options.labelBuilder;if(t.state.multiple){var i=e.isArray(t.state.currValue)?t.state.currValue:[t.state.currValue];i=0===i.length?[0]:i;var l=e.map(i,function(s){return e.grep(t.lookupItems,function(e){return e.index===s})[0]});l=e.grep(l,function(t){return l.length>1||0===l.length?""!==e.trim(t.value):t}),l=e.map(l,function(i){return e.isFunction(s)?s(i):t.utils.format(s,i)}),t.options.multiple.maxLabelEntries&&(l.length>=t.options.multiple.maxLabelEntries+1?(l=l.slice(0,t.options.multiple.maxLabelEntries)).push(e.isFunction(s)?s({text:"..."}):t.utils.format(s,{text:"..."})):l.slice(l.length-1)),t.elements.label.html(l.join(t.options.multiple.separator))}else{var n=t.lookupItems[t.state.currValue];t.elements.label.html(e.isFunction(s)?s(n):t.utils.format(s,n))}},populate:function(){var t=this,s=t.$element.children(),i=t.$element.find("option"),l=i.filter(":selected"),n=i.index(l),a=0,o=t.state.multiple?[]:0;l.length>1&&t.state.multiple&&(n=[],l.each(function(){n.push(e(this).index())})),t.state.currValue=~n?n:o,t.state.selectedIdx=t.state.currValue,t.state.highlightedIdx=t.state.currValue,t.items=[],t.lookupItems=[],s.length&&(s.each(function(s){var i=e(this);if(i.is("optgroup")){var l={element:i,label:i.prop("label"),groupDisabled:i.prop("disabled"),items:[]};i.children().each(function(s){var i=e(this);l.items[s]=t.getItemData(a,i,l.groupDisabled||i.prop("disabled")),t.lookupItems[a]=l.items[s],a++}),t.items[s]=l}else t.items[s]=t.getItemData(a,i,i.prop("disabled")),t.lookupItems[a]=t.items[s],a++}),t.setLabel(),t.elements.items.append(t.elements.itemsScroll.html(t.getItemsMarkup(t.items))))},getItemData:function(t,s,i){return{index:t,element:s,value:s.val(),className:s.prop("class"),text:s.html(),slug:e.trim(this.utils.replaceDiacritics(s.html())),alt:s.attr("data-alt"),selected:s.prop("selected"),disabled:i}},getItemsMarkup:function(t){var s=this,i="<ul>";return e.isFunction(s.options.listBuilder)&&s.options.listBuilder&&(t=s.options.listBuilder(t)),e.each(t,function(t,l){void 0!==l.label?(i+=s.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',s.utils.arrayToClassname([s.classes.group,l.groupDisabled?"disabled":"",l.element.prop("class")]),s.classes.grouplabel,l.element.prop("label")),e.each(l.items,function(e,t){i+=s.getItemMarkup(t.index,t)}),i+="</ul>"):i+=s.getItemMarkup(l.index,l)}),i+"</ul>"},getItemMarkup:function(t,s){var i=this.options.optionsItemBuilder,l={value:s.value,text:s.text,slug:s.slug,index:s.index};return this.utils.format('<li data-index="{1}" class="{2}">{3}</li>',t,this.utils.arrayToClassname([s.className,t===this.items.length-1?"last":"",s.disabled?"disabled":"",s.selected?"selected":""]),e.isFunction(i)?this.utils.format(i(s,this.$element,t),s):this.utils.format(i,l))},unbindEvents:function(){this.elements.wrapper.add(this.$element).add(this.elements.outerWrapper).add(this.elements.input).off(".sl")},bindEvents:function(){var t=this;t.elements.outerWrapper.on("mouseenter.sl mouseleave.sl",function(s){e(this).toggleClass(t.classes.hover,"mouseenter"===s.type),t.options.openOnHover&&(clearTimeout(t.closeTimer),"mouseleave"===s.type?t.closeTimer=setTimeout(e.proxy(t.close,t),t.options.hoverIntentTimeout):t.open())}),t.elements.wrapper.on("click.sl",function(e){t.state.opened?t.close():t.open(e)}),t.options.nativeOnMobile&&t.utils.isMobile()||(t.$element.on("focus.sl",function(){t.elements.input.focus()}),t.elements.input.prop({tabindex:t.originalTabindex,disabled:!1}).on("keydown.sl",e.proxy(t.handleKeys,t)).on("focusin.sl",function(e){t.elements.outerWrapper.addClass(t.classes.focus),t.elements.input.one("blur",function(){t.elements.input.blur()}),t.options.openOnFocus&&!t.state.opened&&t.open(e)}).on("focusout.sl",function(){t.elements.outerWrapper.removeClass(t.classes.focus)}).on("input propertychange",function(){var s=t.elements.input.val(),i=new RegExp("^"+t.utils.escapeRegExp(s),"i");clearTimeout(t.resetStr),t.resetStr=setTimeout(function(){t.elements.input.val("")},t.options.keySearchTimeout),s.length&&e.each(t.items,function(e,s){if(!s.disabled){if(i.test(s.text)||i.test(s.slug))return t.highlight(e),!1;if(s.alt)for(var l=s.alt.split("|"),n=0;n<l.length&&l[n];n++)if(i.test(l[n].trim()))return t.highlight(e),!1}})})),t.$li.on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return t.select(e(this).data("index")),!1}})},handleKeys:function(t){var s=t.which,i=this.options.keys,l=e.inArray(s,i.previous)>-1,n=e.inArray(s,i.next)>-1,a=e.inArray(s,i.select)>-1,o=e.inArray(s,i.open)>-1,r=this.state.highlightedIdx,u=l&&0===r||n&&r+1===this.items.length,p=0;if(13!==s&&32!==s||t.preventDefault(),l||n){if(!this.options.allowWrap&&u)return;l&&(p=this.utils.previousEnabledItem(this.lookupItems,r)),n&&(p=this.utils.nextEnabledItem(this.lookupItems,r)),this.highlight(p)}if(a&&this.state.opened)return this.select(r),void(this.state.multiple&&this.options.multiple.keepMenuOpen||this.close());o&&!this.state.opened&&this.open()},refresh:function(){this.populate(),this.activate(),this.utils.triggerCallback("Refresh",this)},setOptionsDimensions:function(){var e=this.elements.items.closest(":visible").children(":hidden").addClass(this.classes.tempshow),t=this.options.maxHeight,s=this.elements.items.outerWidth(),i=this.elements.wrapper.outerWidth()-(s-this.elements.items.width());!this.options.expandToItemText||i>s?this.finalWidth=i:(this.elements.items.css("overflow","scroll"),this.elements.outerWrapper.width(9e4),this.finalWidth=this.elements.items.width(),this.elements.items.css("overflow",""),this.elements.outerWrapper.width("")),this.elements.items.width(this.finalWidth).height()>t&&this.elements.items.height(t),e.removeClass(this.classes.tempshow)},isInViewport:function(){if(!0===this.options.forceRenderAbove)this.elements.outerWrapper.addClass(this.classes.above);else if(!0===this.options.forceRenderBelow)this.elements.outerWrapper.addClass(this.classes.below);else{var e=s.scrollTop(),t=s.height(),i=this.elements.outerWrapper.offset().top,l=i+this.elements.outerWrapper.outerHeight()+this.itemsHeight<=e+t,n=i-this.itemsHeight>e,a=!l&&n,o=!a;this.elements.outerWrapper.toggleClass(this.classes.above,a),this.elements.outerWrapper.toggleClass(this.classes.below,o)}},detectItemVisibility:function(t){var s=this.$li.filter("[data-index]");this.state.multiple&&(t=e.isArray(t)&&0===t.length?0:t,t=e.isArray(t)?Math.min.apply(Math,t):t);var i=s.eq(t).outerHeight(),l=s[t].offsetTop,n=this.elements.itemsScroll.scrollTop(),a=l+2*i;this.elements.itemsScroll.scrollTop(a>n+this.itemsHeight?a-this.itemsHeight:l-i<n?l-i:n)},open:function(s){var i=this;if(i.options.nativeOnMobile&&i.utils.isMobile())return!1;i.utils.triggerCallback("BeforeOpen",i),s&&(s.preventDefault(),i.options.stopPropagation&&s.stopPropagation()),i.state.enabled&&(i.setOptionsDimensions(),e("."+i.classes.hideselect,"."+i.classes.open).children().selectric("close"),i.state.opened=!0,i.itemsHeight=i.elements.items.outerHeight(),i.itemsInnerHeight=i.elements.items.height(),i.elements.outerWrapper.addClass(i.classes.open),i.elements.input.val(""),s&&"focusin"!==s.type&&i.elements.input.focus(),setTimeout(function(){t.on("click.sl",e.proxy(i.close,i)).on("scroll.sl",e.proxy(i.isInViewport,i))},1),i.isInViewport(),i.options.preventWindowScroll&&t.on("mousewheel.sl DOMMouseScroll.sl","."+i.classes.scroll,function(t){var s=t.originalEvent,l=e(this).scrollTop(),n=0;"detail"in s&&(n=-1*s.detail),"wheelDelta"in s&&(n=s.wheelDelta),"wheelDeltaY"in s&&(n=s.wheelDeltaY),"deltaY"in s&&(n=-1*s.deltaY),(l===this.scrollHeight-i.itemsInnerHeight&&n<0||0===l&&n>0)&&t.preventDefault()}),i.detectItemVisibility(i.state.selectedIdx),i.highlight(i.state.multiple?-1:i.state.selectedIdx),i.utils.triggerCallback("Open",i))},close:function(){this.utils.triggerCallback("BeforeClose",this),t.off(".sl"),this.elements.outerWrapper.removeClass(this.classes.open),this.state.opened=!1,this.utils.triggerCallback("Close",this)},change:function(){var t=this;t.utils.triggerCallback("BeforeChange",t),t.state.multiple?(e.each(t.lookupItems,function(e){t.lookupItems[e].selected=!1,t.$element.find("option").prop("selected",!1)}),e.each(t.state.selectedIdx,function(e,s){t.lookupItems[s].selected=!0,t.$element.find("option").eq(s).prop("selected",!0)}),t.state.currValue=t.state.selectedIdx,t.setLabel(),t.utils.triggerCallback("Change",t)):t.state.currValue!==t.state.selectedIdx&&(t.$element.prop("selectedIndex",t.state.currValue=t.state.selectedIdx).data("value",t.lookupItems[t.state.selectedIdx].text),t.setLabel(),t.utils.triggerCallback("Change",t))},highlight:function(e){var t=this.$li.filter("[data-index]").removeClass("highlighted");this.utils.triggerCallback("BeforeHighlight",this),void 0===e||-1===e||this.lookupItems[e].disabled||(t.eq(this.state.highlightedIdx=e).addClass("highlighted"),this.detectItemVisibility(e),this.utils.triggerCallback("Highlight",this))},select:function(t){var s=this,i=s.$li.filter("[data-index]");if(s.utils.triggerCallback("BeforeSelect",s,t),void 0!==t&&-1!==t&&!s.lookupItems[t].disabled){if(s.state.multiple){s.state.selectedIdx=e.isArray(s.state.selectedIdx)?s.state.selectedIdx:[s.state.selectedIdx];var l=e.inArray(t,s.state.selectedIdx);-1!==l?s.state.selectedIdx.splice(l,1):s.state.selectedIdx.push(t),i.removeClass("selected").filter(function(t){return-1!==e.inArray(t,s.state.selectedIdx)}).addClass("selected")}else i.removeClass("selected").eq(s.state.selectedIdx=t).addClass("selected");s.state.multiple&&s.options.multiple.keepMenuOpen||s.close(),s.change(),s.utils.triggerCallback("Select",s,t)}},destroy:function(e){this.state&&this.state.enabled&&(this.elements.items.add(this.elements.wrapper).add(this.elements.input).remove(),e||this.$element.removeData("selectric").removeData("value"),this.$element.prop("tabindex",this.originalTabindex).off(".sl").off(this.eventTriggers).unwrap().unwrap(),this.state.enabled=!1)}},e.fn.selectric=function(t){return this.each(function(){var s=e.data(this,"selectric");s&&!s.disableOnMobile?"string"==typeof t&&s[t]?s[t]():s.init(t):e.data(this,"selectric",new n(this,t))})},e.fn.selectric.defaults={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!1,nativeOnMobile:!0,openOnFocus:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,forceRenderAbove:!1,forceRenderBelow:!1,stopPropagation:!0,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:!1,keys:{previous:[37,38],next:[39,40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:"selectric",camelCase:!1},multiple:{separator:", ",keepMenuOpen:!0,maxLabelEntries:!1}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5zZWxlY3RyaWMuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyb290IiwialF1ZXJ5IiwidW5kZWZpbmVkIiwid2luZG93IiwicmVxdWlyZSIsIiQiLCIkZG9jIiwiZG9jdW1lbnQiLCIkd2luIiwiY2hhcnMiLCJkaWFjcml0aWNzIiwiU2VsZWN0cmljIiwiZWxlbWVudCIsIm9wdHMiLCJ0aGlzIiwiJGVsZW1lbnQiLCJzdGF0ZSIsIm11bHRpcGxlIiwiYXR0ciIsImVuYWJsZWQiLCJvcGVuZWQiLCJjdXJyVmFsdWUiLCJzZWxlY3RlZElkeCIsImhpZ2hsaWdodGVkSWR4IiwiZXZlbnRUcmlnZ2VycyIsIm9wZW4iLCJjbG9zZSIsImRlc3Ryb3kiLCJyZWZyZXNoIiwiaW5pdCIsInByb3RvdHlwZSIsInV0aWxzIiwiaXNNb2JpbGUiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZXNjYXBlUmVnRXhwIiwic3RyIiwicmVwbGFjZSIsInJlcGxhY2VEaWFjcml0aWNzIiwiayIsImxlbmd0aCIsInRvTG93ZXJDYXNlIiwiZm9ybWF0IiwiZiIsImEiLCJhcmd1bWVudHMiLCJzIiwiaSIsInAiLCJuZXh0RW5hYmxlZEl0ZW0iLCJzZWxlY3RJdGVtcyIsInNlbGVjdGVkIiwiZGlzYWJsZWQiLCJwcmV2aW91c0VuYWJsZWRJdGVtIiwidG9EYXNoIiwidHJpZ2dlckNhbGxiYWNrIiwiZm4iLCJzY29wZSIsImVsbSIsImZ1bmMiLCJvcHRpb25zIiwiYXJncyIsImNvbmNhdCIsInNsaWNlIiwiY2FsbCIsImlzRnVuY3Rpb24iLCJhcHBseSIsInRyaWdnZXIiLCJwbHVnaW5OYW1lIiwiYXJyYXlUb0NsYXNzbmFtZSIsImFyciIsIm5ld0FyciIsImdyZXAiLCJpdGVtIiwidHJpbSIsImpvaW4iLCJfdGhpcyIsImV4dGVuZCIsImRlZmF1bHRzIiwiZGlzYWJsZU9uTW9iaWxlIiwiY2xhc3NlcyIsImdldENsYXNzTmFtZXMiLCJpbnB1dCIsImNsYXNzIiwicmVhZG9ubHkiLCJpdGVtcyIsInRhYmluZGV4IiwiaXRlbXNTY3JvbGwiLCJzY3JvbGwiLCJ3cmFwcGVyIiwicHJlZml4IiwiaHRtbCIsImFycm93QnV0dG9uTWFya3VwIiwibGFiZWwiLCJvdXRlcldyYXBwZXIiLCJ3cmFwIiwicGFyZW50IiwiYXBwZW5kIiwicHJlcGVuZCIsImhpZGVTZWxlY3RXcmFwcGVyIiwiaGlkZXNlbGVjdCIsImVsZW1lbnRzIiwibmF0aXZlT25Nb2JpbGUiLCJhZGRDbGFzcyIsIm9uIiwib3JpZ2luYWxUYWJpbmRleCIsInByb3AiLCJwb3B1bGF0ZSIsImFjdGl2YXRlIiwiaGlkZGVuQ2hpbGRyZW4iLCJjbG9zZXN0IiwiY2hpbGRyZW4iLCJ0ZW1wc2hvdyIsIm9yaWdpbmFsV2lkdGgiLCJ3aWR0aCIsInJlbW92ZUNsYXNzIiwicmVzcG9uc2l2ZSIsImluaGVyaXRPcmlnaW5hbFdpZHRoIiwidW5iaW5kRXZlbnRzIiwiJGxpIiwicmVtb3ZlQXR0ciIsImZpbmQiLCJiaW5kRXZlbnRzIiwiY3VzdG9tQ2xhc3MiLCJjbGFzc2VzT2JqIiwiZWFjaCIsInNwbGl0IiwiY3VyckNsYXNzIiwiYyIsImNhbWVsQ2FzZSIsInNldExhYmVsIiwibGFiZWxCdWlsZGVyIiwiY3VycmVudFZhbHVlcyIsImlzQXJyYXkiLCJsYWJlbE1hcmt1cCIsIm1hcCIsInZhbHVlIiwibG9va3VwSXRlbXMiLCJpbmRleCIsIm1heExhYmVsRW50cmllcyIsInB1c2giLCJ0ZXh0Iiwic2VwYXJhdG9yIiwiY3Vyckl0ZW0iLCIkb3B0aW9ucyIsIiRqdXN0T3B0aW9ucyIsIiRzZWxlY3RlZCIsImZpbHRlciIsInNlbGVjdGVkSW5kZXgiLCJjdXJySW5kZXgiLCJlbXB0eVZhbHVlIiwiJGVsbSIsImlzIiwib3B0aW9uc0dyb3VwIiwiZ3JvdXBEaXNhYmxlZCIsImdldEl0ZW1EYXRhIiwiZ2V0SXRlbXNNYXJrdXAiLCJpc0Rpc2FibGVkIiwidmFsIiwiY2xhc3NOYW1lIiwic2x1ZyIsImFsdCIsIm1hcmt1cCIsImxpc3RCdWlsZGVyIiwiZ3JvdXAiLCJncm91cGxhYmVsIiwiZ2V0SXRlbU1hcmt1cCIsIml0ZW1EYXRhIiwiaXRlbUJ1aWxkZXIiLCJvcHRpb25zSXRlbUJ1aWxkZXIiLCJmaWx0ZXJlZEl0ZW1EYXRhIiwiYWRkIiwib2ZmIiwiZSIsInRvZ2dsZUNsYXNzIiwiaG92ZXIiLCJ0eXBlIiwib3Blbk9uSG92ZXIiLCJjbGVhclRpbWVvdXQiLCJjbG9zZVRpbWVyIiwic2V0VGltZW91dCIsInByb3h5IiwiaG92ZXJJbnRlbnRUaW1lb3V0IiwiZm9jdXMiLCJoYW5kbGVLZXlzIiwib25lIiwiYmx1ciIsIm9wZW5PbkZvY3VzIiwic2VhcmNoUmVnRXhwIiwiUmVnRXhwIiwicmVzZXRTdHIiLCJrZXlTZWFyY2hUaW1lb3V0IiwiaGlnaGxpZ2h0IiwiYWx0SXRlbXMiLCJhaSIsIm1vdXNlZG93biIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY2xpY2siLCJzZWxlY3QiLCJkYXRhIiwia2V5Iiwid2hpY2giLCJrZXlzIiwiaXNQcmV2S2V5IiwiaW5BcnJheSIsInByZXZpb3VzIiwiaXNOZXh0S2V5IiwibmV4dCIsImlzU2VsZWN0S2V5IiwiaXNPcGVuS2V5IiwiaWR4IiwiaXNGaXJzdE9yTGFzdEl0ZW0iLCJnb1RvSXRlbSIsImFsbG93V3JhcCIsImtlZXBNZW51T3BlbiIsInNldE9wdGlvbnNEaW1lbnNpb25zIiwibWF4SGVpZ2h0IiwiaXRlbXNXaWR0aCIsIm91dGVyV2lkdGgiLCJ3cmFwcGVyV2lkdGgiLCJleHBhbmRUb0l0ZW1UZXh0IiwiZmluYWxXaWR0aCIsImNzcyIsImhlaWdodCIsImlzSW5WaWV3cG9ydCIsImZvcmNlUmVuZGVyQWJvdmUiLCJhYm92ZSIsImZvcmNlUmVuZGVyQmVsb3ciLCJiZWxvdyIsInNjcm9sbFRvcCIsIndpbkhlaWdodCIsInVpUG9zWCIsIm9mZnNldCIsInRvcCIsImZpdHNEb3duIiwib3V0ZXJIZWlnaHQiLCJpdGVtc0hlaWdodCIsImZpdHNBYm92ZSIsInJlbmRlckFib3ZlIiwicmVuZGVyQmVsb3ciLCJkZXRlY3RJdGVtVmlzaWJpbGl0eSIsIiRmaWx0ZXJlZExpIiwiTWF0aCIsIm1pbiIsImxpSGVpZ2h0IiwiZXEiLCJsaVRvcCIsIm9mZnNldFRvcCIsIml0ZW1zU2Nyb2xsVG9wIiwic2Nyb2xsVCIsIml0ZW1zSW5uZXJIZWlnaHQiLCJwcmV2ZW50V2luZG93U2Nyb2xsIiwib3JnRXZlbnQiLCJvcmlnaW5hbEV2ZW50IiwiZGVsdGFZIiwiZGV0YWlsIiwid2hlZWxEZWx0YSIsIndoZWVsRGVsdGFZIiwic2Nyb2xsSGVpZ2h0IiwiY2hhbmdlIiwiaGFzU2VsZWN0ZWRJbmRleCIsInNwbGljZSIsInByZXNlcnZlRGF0YSIsInJlbW92ZSIsInJlbW92ZURhdGEiLCJ1bndyYXAiLCJvbkNoYW5nZSJdLCJtYXBwaW5ncyI6IkNBQUMsU0FBU0EsR0FHZSxtQkFBWEMsUUFBeUJBLE9BQU9DLElBQzFDRCxRQUFRLFVBQVdELEdBQ1MsaUJBQVhHLFFBQXVCQSxPQUFPQyxRQUUvQ0QsT0FBT0MsUUFBVSxTQUFVQyxFQUFNQyxHQVMvQixZQVJnQkMsSUFBWEQsSUFFREEsRUFEcUIsb0JBQVhFLE9BQ0RDLFFBQVEsVUFFUkEsUUFBUSxTQUFSQSxDQUFrQkosSUFHL0JMLEVBQVFNLEdBQ0RBLEdBSVROLEVBQVFNLFFBcEJaLENBc0JFLFNBQVNJLEdBQ1QsYUFFQSxJQUFJQyxFQUFPRCxFQUFFRSxVQUNUQyxFQUFPSCxFQUFFRixRQU1UTSxHQUFTLElBQUssSUFBSyxJQUFLLElBQUssSUFBSyxJQUFLLElBQUssS0FDNUNDLEdBQ0YsZUFDQSxlQUNBLGVBQ0EsZUFDQSxlQUNBLFVBQ0EsVUFDQSxnQkFVRUMsRUFBWSxTQUFTQyxFQUFTQyxHQUNwQkMsS0FFTkYsUUFBVUEsRUFGSkUsS0FHTkMsU0FBV1YsRUFBRU8sR0FIUEUsS0FLTkUsT0FDSkMsV0FOVUgsS0FNZUMsU0FBU0csS0FBSyxZQUN2Q0MsU0FBaUIsRUFDakJDLFFBQWlCLEVBQ2pCQyxXQUFrQixFQUNsQkMsYUFBa0IsRUFDbEJDLGdCQUFrQixHQVhSVCxLQWNOVSxlQUNKQyxLQWZVWCxLQWVNVyxLQUNoQkMsTUFoQlVaLEtBZ0JNWSxNQUNoQkMsUUFqQlViLEtBaUJNYSxRQUNoQkMsUUFsQlVkLEtBa0JNYyxRQUNoQkMsS0FuQlVmLEtBbUJNZSxNQW5CTmYsS0FzQk5lLEtBQUtoQixJQUdiRixFQUFVbUIsV0FDUkMsT0FNRUMsU0FBVSxXQUNSLE1BQU8sMEJBQTBCQyxLQUFLQyxVQUFVQyxZQVNsREMsYUFBYyxTQUFTQyxHQUNyQixPQUFPQSxFQUFJQyxRQUFRLHNCQUF1QixTQVM1Q0Msa0JBQW1CLFNBQVNGLEdBRzFCLElBRkEsSUFBSUcsRUFBSTlCLEVBQVcrQixPQUVaRCxLQUNMSCxFQUFNQSxFQUFJSyxjQUFjSixRQUFRNUIsRUFBVzhCLEdBQUkvQixFQUFNK0IsSUFHdkQsT0FBT0gsR0FVVE0sT0FBUSxTQUFTQyxHQUNmLElBQUlDLEVBQUlDLFVBQ1IsT0FBUSxHQUFLRixHQUNWTixRQUNDLHVCQUNBLFNBQ0VTLEVBQ0FDLEVBQ0FDLEdBRUEsT0FBT0EsR0FBS0osRUFBRSxHQUNWQSxFQUFFLEdBQUdJLEdBQ0xKLEVBQUVHLE1BV2RFLGdCQUFpQixTQUFTQyxFQUFhQyxHQUNyQyxLQUFRRCxFQUFhQyxHQUFZQSxFQUFXLEdBQUtELEVBQVlWLFFBQVNZLFdBR3RFLE9BQU9ELEdBVVRFLG9CQUFxQixTQUFTSCxFQUFhQyxHQUN6QyxLQUFRRCxFQUFhQyxHQUFZQSxFQUFXLEVBQUlBLEVBQVdELEVBQVlWLFFBQVUsR0FBSVksV0FHckYsT0FBT0QsR0FTVEcsT0FBUSxTQUFTbEIsR0FDZixPQUFPQSxFQUFJQyxRQUFRLHFCQUFzQixTQUFTSSxlQVNwRGMsZ0JBQWlCLFNBQVNDLEVBQUlDLEdBQzVCLElBQUlDLEVBQU1ELEVBQU05QyxRQUNaZ0QsRUFBT0YsRUFBTUcsUUFBUSxLQUFPSixHQUM1QkssR0FBUUgsR0FBS0ksVUFBVUMsTUFBTUMsS0FBS25CLFdBQVdrQixNQUFNLElBRWxEM0QsRUFBRTZELFdBQVdOLElBQ2hCQSxFQUFLTyxNQUFNUixFQUFLRyxHQUdsQnpELEVBQUVzRCxHQUFLUyxRQUFRQyxhQUFtQnZELEtBQUt5QyxPQUFPRSxHQUFLSyxJQVFyRFEsaUJBQWtCLFNBQVNDLEdBQ3pCLElBQUlDLEVBQVNuRSxFQUFFb0UsS0FBS0YsRUFBSyxTQUFTRyxHQUNoQyxRQUFTQSxJQUdYLE9BQU9yRSxFQUFFc0UsS0FBS0gsRUFBT0ksS0FBSyxRQUs5Qi9DLEtBQU0sU0FBU2hCLEdBQ2IsSUFBSWdFLEVBQVEvRCxLQVdaLEdBUkErRCxFQUFNaEIsUUFBVXhELEVBQUV5RSxRQUFPLEtBQVV6RSxFQUFFb0QsR0FBYSxVQUFFc0IsU0FBVUYsRUFBTWhCLFFBQVNoRCxHQUU3RWdFLEVBQU05QyxNQUFNeUIsZ0JBQWdCLGFBQWNxQixHQUcxQ0EsRUFBTWxELFNBQVEsR0FHVGtELEVBQU1oQixRQUFRbUIsaUJBQW1CSCxFQUFNOUMsTUFBTUMsV0FDaEQ2QyxFQUFNRyxpQkFBa0IsTUFEMUIsQ0FNQUgsRUFBTUksUUFBVUosRUFBTUssZ0JBR3RCLElBQUlDLEVBQXFCOUUsRUFBRSxZQUFjK0UsTUFBU1AsRUFBTUksUUFBUUUsTUFBT0UsU0FBWVIsRUFBTTlDLE1BQU1DLGFBQzNGc0QsRUFBcUJqRixFQUFFLFVBQWMrRSxNQUFTUCxFQUFNSSxRQUFRSyxNQUFPQyxVQUFhLElBQ2hGQyxFQUFxQm5GLEVBQUUsVUFBYytFLE1BQVNQLEVBQU1JLFFBQVFRLFNBQzVEQyxFQUFxQnJGLEVBQUUsVUFBYytFLE1BQVNQLEVBQU1JLFFBQVFVLE9BQVFDLEtBQVFmLEVBQU1oQixRQUFRZ0Msb0JBQzFGQyxFQUFxQnpGLEVBQUUsV0FBYytFLE1BQVMsVUFDOUNXLEVBQXFCbEIsRUFBTTlELFNBQVNpRixLQUFLLFVBQVVDLFNBQVNDLE9BQU9SLEVBQVFTLFFBQVFMLEdBQVFSLEVBQU9ILEdBQ2xHaUIsRUFBcUIvRixFQUFFLFVBQWMrRSxNQUFTUCxFQUFNSSxRQUFRb0IsYUFFaEV4QixFQUFNeUIsVUFDSm5CLE1BQWVBLEVBQ2ZHLE1BQWVBLEVBQ2ZFLFlBQWVBLEVBQ2ZFLFFBQWVBLEVBQ2ZJLE1BQWVBLEVBQ2ZDLGFBQWVBLEdBR1psQixFQUFNaEIsUUFBUTBDLGdCQUFrQjFCLEVBQU05QyxNQUFNQyxhQUMvQzZDLEVBQU15QixTQUFTbkIsV0FBUWpGLEVBQ3ZCa0csRUFBa0JJLFNBQVMzQixFQUFNSSxRQUFRVSxPQUFTLGNBRWxEZCxFQUFNOUQsU0FBUzBGLEdBQUcsU0FBVSxXQUMxQjVCLEVBQU1qRCxhQUlWaUQsRUFBTTlELFNBQ0gwRixHQUFHNUIsRUFBTXJELGVBQ1R3RSxLQUFLSSxHQUVSdkIsRUFBTTZCLGlCQUFtQjdCLEVBQU05RCxTQUFTNEYsS0FBSyxZQUM3QzlCLEVBQU05RCxTQUFTNEYsS0FBSyxZQUFhLEdBRWpDOUIsRUFBTStCLFdBQ04vQixFQUFNZ0MsV0FFTmhDLEVBQU05QyxNQUFNeUIsZ0JBQWdCLE9BQVFxQixLQUl0Q2dDLFNBQVUsV0FDUixJQUNJQyxFQURRaEcsS0FDZXdGLFNBQVNoQixNQUFNeUIsUUFBUSxZQUFZQyxTQUFTLFdBQVdSLFNBRHRFMUYsS0FDcUZtRSxRQUFRZ0MsVUFDckdDLEVBRlFwRyxLQUVjQyxTQUFTb0csUUFFbkNMLEVBQWVNLFlBSkh0RyxLQUlxQm1FLFFBQVFnQyxVQUo3Qm5HLEtBTU5pQixNQUFNeUIsZ0JBQWdCLGlCQU5oQjFDLE1BQUFBLEtBUU53RixTQUFTUCxhQUFhWSxLQUFLLFFBUnJCN0YsS0FTSmlCLE1BQU11QyxrQkFURnhELEtBVUZtRSxRQUFRUyxRQVZONUUsS0FXRkMsU0FBUzRGLEtBQUssU0FBU3JFLFFBQVEsT0FYN0J4QixLQVcyQ21FLFFBQVFVLE9BQVMsT0FYNUQ3RSxLQVlGK0MsUUFBUXdELFdBWk52RyxLQVl5Qm1FLFFBQVFvQyxXQUFhLE1BWjlDdkcsS0FnQkQrQyxRQUFReUQsc0JBQXdCSixFQUFnQixHQWhCL0NwRyxLQWlCSndGLFNBQVNQLGFBQWFvQixNQUFNRCxHQWpCeEJwRyxLQW9CTnlHLGVBcEJNekcsS0FzQkFDLFNBQVM0RixLQUFLLGFBdEJkN0YsS0FrQ0p3RixTQUFTUCxhQUFhUyxTQWxDbEIxRixLQWtDaUNtRSxRQUFRNUIsVUFsQ3pDdkMsS0FvQ0N3RixTQUFTbkIsT0FwQ1ZyRSxLQXFDRndGLFNBQVNuQixNQUFNd0IsS0FBSyxZQUFZLEtBckM5QjdGLEtBdUJKRSxNQUFNRyxTQUFVLEVBdkJaTCxLQTBCSndGLFNBQVNQLGFBQWFxQixZQTFCbEJ0RyxLQTBCb0NtRSxRQUFRNUIsVUExQjVDdkMsS0E4QkowRyxJQTlCSTFHLEtBOEJRd0YsU0FBU2hCLE1BQU1tQyxXQUFXLFNBQVNDLEtBQUssTUE5QmhENUcsS0FnQ0o2RyxjQWhDSTdHLEtBeUNOaUIsTUFBTXlCLGdCQUFnQixXQXpDaEIxQyxPQWlEZG9FLGNBQWUsV0FDYixJQUFJTCxFQUFRL0QsS0FDUjhHLEVBQWMvQyxFQUFNaEIsUUFBUStELFlBQzVCQyxLQVNKLE9BUEF4SCxFQUFFeUgsS0F2U1UsbUhBdVNLQyxNQUFNLEtBQU0sU0FBUy9FLEVBQUdnRixHQUN2QyxJQUFJQyxFQUFJTCxFQUFZakMsT0FBU3FDLEVBQzdCSCxFQUFXRyxFQUFVdEYsZUFBaUJrRixFQUFZTSxVQUFZRCxFQUFJcEQsRUFBTTlDLE1BQU13QixPQUFPMEUsS0FHdkZKLEVBQVdsQyxPQUFTaUMsRUFBWWpDLE9BRXpCa0MsR0FJVE0sU0FBVSxXQUNSLElBQUl0RCxFQUFRL0QsS0FDUnNILEVBQWV2RCxFQUFNaEIsUUFBUXVFLGFBRWpDLEdBQUt2RCxFQUFNN0QsTUFBTUMsU0FBVyxDQUUxQixJQUFJb0gsRUFBZ0JoSSxFQUFFaUksUUFBUXpELEVBQU03RCxNQUFNSyxXQUFhd0QsRUFBTTdELE1BQU1LLFdBQWF3RCxFQUFNN0QsTUFBTUssV0FHNUZnSCxFQUF5QyxJQUF6QkEsRUFBYzVGLFFBQWdCLEdBQUs0RixFQUVuRCxJQUFJRSxFQUFjbEksRUFBRW1JLElBQUlILEVBQWUsU0FBU0ksR0FDOUMsT0FBT3BJLEVBQUVvRSxLQUFLSSxFQUFNNkQsWUFBYSxTQUFTaEUsR0FDeEMsT0FBT0EsRUFBS2lFLFFBQVVGLElBQ3JCLEtBR0xGLEVBQWNsSSxFQUFFb0UsS0FBSzhELEVBQWEsU0FBUzdELEdBR3pDLE9BQUs2RCxFQUFZOUYsT0FBUyxHQUE0QixJQUF2QjhGLEVBQVk5RixPQUNYLEtBQXZCcEMsRUFBRXNFLEtBQUtELEVBQUsrRCxPQUVkL0QsSUFHVDZELEVBQWNsSSxFQUFFbUksSUFBSUQsRUFBYSxTQUFTN0QsR0FDeEMsT0FBT3JFLEVBQUU2RCxXQUFXa0UsR0FDaEJBLEVBQWExRCxHQUNiRyxFQUFNOUMsTUFBTVksT0FBT3lGLEVBQWMxRCxLQUlsQ0csRUFBTWhCLFFBQVE1QyxTQUFTMkgsa0JBQ3JCTCxFQUFZOUYsUUFBVW9DLEVBQU1oQixRQUFRNUMsU0FBUzJILGdCQUFrQixHQUNsRUwsRUFBY0EsRUFBWXZFLE1BQU0sRUFBR2EsRUFBTWhCLFFBQVE1QyxTQUFTMkgsa0JBQzlDQyxLQUNWeEksRUFBRTZELFdBQVdrRSxHQUNUQSxHQUFlVSxLQUFNLFFBQ3JCakUsRUFBTTlDLE1BQU1ZLE9BQU95RixHQUFnQlUsS0FBTSxTQUUvQ1AsRUFBWXZFLE1BQU11RSxFQUFZOUYsT0FBUyxJQUczQ29DLEVBQU15QixTQUFTUixNQUFNRixLQUFLMkMsRUFBWTNELEtBQUtDLEVBQU1oQixRQUFRNUMsU0FBUzhILGdCQUU3RCxDQUNMLElBQUlDLEVBQVduRSxFQUFNNkQsWUFBWTdELEVBQU03RCxNQUFNSyxXQUU3Q3dELEVBQU15QixTQUFTUixNQUFNRixLQUNuQnZGLEVBQUU2RCxXQUFXa0UsR0FDVEEsRUFBYVksR0FDYm5FLEVBQU05QyxNQUFNWSxPQUFPeUYsRUFBY1ksTUFNM0NwQyxTQUFVLFdBQ1IsSUFBSS9CLEVBQVEvRCxLQUNSbUksRUFBV3BFLEVBQU05RCxTQUFTaUcsV0FDMUJrQyxFQUFlckUsRUFBTTlELFNBQVMyRyxLQUFLLFVBQ25DeUIsRUFBWUQsRUFBYUUsT0FBTyxhQUNoQ0MsRUFBZ0JILEVBQWFQLE1BQU1RLEdBQ25DRyxFQUFZLEVBQ1pDLEVBQWMxRSxFQUFNN0QsTUFBTUMsWUFBZ0IsRUFFekNrSSxFQUFVMUcsT0FBUyxHQUFLb0MsRUFBTTdELE1BQU1DLFdBQ3ZDb0ksS0FDQUYsRUFBVXJCLEtBQUssV0FDYnVCLEVBQWNSLEtBQUt4SSxFQUFFUyxNQUFNNkgsWUFJL0I5RCxFQUFNN0QsTUFBTUssV0FBY2dJLEVBQWdCQSxFQUFnQkUsRUFDMUQxRSxFQUFNN0QsTUFBTU0sWUFBY3VELEVBQU03RCxNQUFNSyxVQUN0Q3dELEVBQU03RCxNQUFNTyxlQUFpQnNELEVBQU03RCxNQUFNSyxVQUN6Q3dELEVBQU1TLFNBQ05ULEVBQU02RCxlQUVETyxFQUFTeEcsU0FFWndHLEVBQVNuQixLQUFLLFNBQVM5RSxHQUNyQixJQUFJd0csRUFBT25KLEVBQUVTLE1BRWIsR0FBSzBJLEVBQUtDLEdBQUcsWUFBYyxDQUV6QixJQUFJQyxHQUNGOUksUUFBZ0I0SSxFQUNoQjFELE1BQWdCMEQsRUFBSzdDLEtBQUssU0FDMUJnRCxjQUFnQkgsRUFBSzdDLEtBQUssWUFDMUJyQixVQUdGa0UsRUFBS3hDLFdBQVdjLEtBQUssU0FBUzlFLEdBQzVCLElBQUl3RyxFQUFPbkosRUFBRVMsTUFFYjRJLEVBQWFwRSxNQUFNdEMsR0FBSzZCLEVBQU0rRSxZQUFZTixFQUFXRSxFQUFNRSxFQUFhQyxlQUFpQkgsRUFBSzdDLEtBQUssYUFFbkc5QixFQUFNNkQsWUFBWVksR0FBYUksRUFBYXBFLE1BQU10QyxHQUVsRHNHLE1BR0Z6RSxFQUFNUyxNQUFNdEMsR0FBSzBHLE9BSWpCN0UsRUFBTVMsTUFBTXRDLEdBQUs2QixFQUFNK0UsWUFBWU4sRUFBV0UsRUFBTUEsRUFBSzdDLEtBQUssYUFFOUQ5QixFQUFNNkQsWUFBWVksR0FBYXpFLEVBQU1TLE1BQU10QyxHQUUzQ3NHLE1BS0p6RSxFQUFNc0QsV0FDTnRELEVBQU15QixTQUFTaEIsTUFBTVksT0FBUXJCLEVBQU15QixTQUFTZCxZQUFZSSxLQUFNZixFQUFNZ0YsZUFBZWhGLEVBQU1TLFdBVzdGc0UsWUFBYSxTQUFTakIsRUFBT2EsRUFBTU0sR0FHakMsT0FDRW5CLE1BQVlBLEVBQ1ovSCxRQUFZNEksRUFDWmYsTUFBWWUsRUFBS08sTUFDakJDLFVBQVlSLEVBQUs3QyxLQUFLLFNBQ3RCbUMsS0FBWVUsRUFBSzVELE9BQ2pCcUUsS0FBWTVKLEVBQUVzRSxLQVJKN0QsS0FRZWlCLE1BQU1RLGtCQUFrQmlILEVBQUs1RCxTQUN0RHNFLElBQVlWLEVBQUt0SSxLQUFLLFlBQ3RCa0MsU0FBWW9HLEVBQUs3QyxLQUFLLFlBQ3RCdEQsU0FBWXlHLElBVWhCRCxlQUFnQixTQUFTdkUsR0FDdkIsSUFBSVQsRUFBUS9ELEtBQ1JxSixFQUFTLE9BZ0NiLE9BOUJLOUosRUFBRTZELFdBQVdXLEVBQU1oQixRQUFRdUcsY0FBZ0J2RixFQUFNaEIsUUFBUXVHLGNBQzVEOUUsRUFBUVQsRUFBTWhCLFFBQVF1RyxZQUFZOUUsSUFHcENqRixFQUFFeUgsS0FBS3hDLEVBQU8sU0FBU3RDLEVBQUdXLFFBQ0x6RCxJQUFkeUQsRUFBSW1DLE9BRVBxRSxHQUFVdEYsRUFBTTlDLE1BQU1ZLE9BQU8sMkNBQzNCa0MsRUFBTTlDLE1BQU11QyxrQkFDVk8sRUFBTUksUUFBUW9GLE1BQ2QxRyxFQUFJZ0csY0FBZ0IsV0FBYSxHQUNqQ2hHLEVBQUkvQyxRQUFRK0YsS0FBSyxXQUVuQjlCLEVBQU1JLFFBQVFxRixXQUNkM0csRUFBSS9DLFFBQVErRixLQUFLLFVBR25CdEcsRUFBRXlILEtBQUtuRSxFQUFJMkIsTUFBTyxTQUFTdEMsRUFBR1csR0FDNUJ3RyxHQUFVdEYsRUFBTTBGLGNBQWM1RyxFQUFJZ0YsTUFBT2hGLEtBRzNDd0csR0FBVSxTQUlWQSxHQUFVdEYsRUFBTTBGLGNBQWM1RyxFQUFJZ0YsTUFBT2hGLEtBS3RDd0csRUFBUyxTQVVsQkksY0FBZSxTQUFTNUIsRUFBTzZCLEdBQzdCLElBQ0lDLEVBRFEzSixLQUNZK0MsUUFBUTZHLG1CQUc1QkMsR0FDRmxDLE1BQU8rQixFQUFTL0IsTUFDaEJLLEtBQU8wQixFQUFTMUIsS0FDaEJtQixLQUFPTyxFQUFTUCxLQUNoQnRCLE1BQU82QixFQUFTN0IsT0FHbEIsT0FYWTdILEtBV0NpQixNQUFNWSxPQUFPLDRDQUN4QmdHLEVBWlU3SCxLQWFKaUIsTUFBTXVDLGtCQUNWa0csRUFBU1IsVUFDVHJCLElBZlE3SCxLQWVRd0UsTUFBTTdDLE9BQVMsRUFBSyxPQUFhLEdBQ2pEK0gsRUFBU25ILFNBQTJCLFdBQWEsR0FDakRtSCxFQUFTcEgsU0FBMkIsV0FBYSxLQUVuRC9DLEVBQUU2RCxXQUFXdUcsR0FuQkgzSixLQW9CQWlCLE1BQU1ZLE9BQU84SCxFQUFZRCxFQUFVMUosS0FBS0MsU0FBVTRILEdBQVE2QixHQXBCMUQxSixLQXFCQWlCLE1BQU1ZLE9BQU84SCxFQUFhRSxLQUt4Q3BELGFBQWMsV0FDQXpHLEtBRU53RixTQUFTWixRQUNaa0YsSUFIUzlKLEtBR0NDLFVBQ1Y2SixJQUpTOUosS0FJQ3dGLFNBQVNQLGNBQ25CNkUsSUFMUzlKLEtBS0N3RixTQUFTbkIsT0FDbkIwRixJQXRoQm9CLFFBMGhCekJsRCxXQUFZLFdBQ1YsSUFBSTlDLEVBQVEvRCxLQUVaK0QsRUFBTXlCLFNBQVNQLGFBQWFVLEdBQUcsOEJBQTRFLFNBQVNxRSxHQUNsSHpLLEVBQUVTLE1BQU1pSyxZQUFZbEcsRUFBTUksUUFBUStGLE1BQWtCLGVBQVhGLEVBQUVHLE1BR3RDcEcsRUFBTWhCLFFBQVFxSCxjQUNqQkMsYUFBYXRHLEVBQU11RyxZQUVILGVBQVhOLEVBQUVHLEtBQ0xwRyxFQUFNdUcsV0FBYUMsV0FBV2hMLEVBQUVpTCxNQUFNekcsRUFBTW5ELE1BQU9tRCxHQUFRQSxFQUFNaEIsUUFBUTBILG9CQUV6RTFHLEVBQU1wRCxVQU1ab0QsRUFBTXlCLFNBQVNaLFFBQVFlLEdBQUcsV0FBZ0MsU0FBU3FFLEdBQ2pFakcsRUFBTTdELE1BQU1JLE9BQVN5RCxFQUFNbkQsUUFBVW1ELEVBQU1wRCxLQUFLcUosS0FNM0NqRyxFQUFNaEIsUUFBUTBDLGdCQUFrQjFCLEVBQU05QyxNQUFNQyxhQUNqRDZDLEVBQU05RCxTQUFTMEYsR0FBRyxXQUFnQyxXQUNoRDVCLEVBQU15QixTQUFTbkIsTUFBTXFHLFVBR3ZCM0csRUFBTXlCLFNBQVNuQixNQUNad0IsTUFBT3BCLFNBQVVWLEVBQU02QixpQkFBa0JyRCxVQUFVLElBQ25Eb0QsR0FBRyxhQUFrQ3BHLEVBQUVpTCxNQUFNekcsRUFBTTRHLFdBQVk1RyxJQUMvRDRCLEdBQUcsYUFBa0MsU0FBU3FFLEdBQzdDakcsRUFBTXlCLFNBQVNQLGFBQWFTLFNBQVMzQixFQUFNSSxRQUFRdUcsT0FHbkQzRyxFQUFNeUIsU0FBU25CLE1BQU11RyxJQUFJLE9BQVEsV0FDL0I3RyxFQUFNeUIsU0FBU25CLE1BQU13RyxTQUdsQjlHLEVBQU1oQixRQUFRK0gsY0FBZ0IvRyxFQUFNN0QsTUFBTUksUUFDN0N5RCxFQUFNcEQsS0FBS3FKLEtBR2RyRSxHQUFHLGNBQW1DLFdBQ3JDNUIsRUFBTXlCLFNBQVNQLGFBQWFxQixZQUFZdkMsRUFBTUksUUFBUXVHLFNBRXZEL0UsR0FBRyx1QkFBd0IsV0FDMUIsSUFBSXNELEVBQU1sRixFQUFNeUIsU0FBU25CLE1BQU00RSxNQUMzQjhCLEVBQWUsSUFBSUMsT0FBTyxJQUFNakgsRUFBTTlDLE1BQU1LLGFBQWEySCxHQUFNLEtBR25Fb0IsYUFBYXRHLEVBQU1rSCxVQUNuQmxILEVBQU1rSCxTQUFXVixXQUFXLFdBQzFCeEcsRUFBTXlCLFNBQVNuQixNQUFNNEUsSUFBSSxLQUN4QmxGLEVBQU1oQixRQUFRbUksa0JBRVpqQyxFQUFJdEgsUUFFUHBDLEVBQUV5SCxLQUFLakQsRUFBTVMsTUFBTyxTQUFTdEMsRUFBR1csR0FDOUIsSUFBSUEsRUFBSU4sU0FBUixDQUdBLEdBQUl3SSxFQUFhNUosS0FBSzBCLEVBQUltRixPQUFTK0MsRUFBYTVKLEtBQUswQixFQUFJc0csTUFFdkQsT0FEQXBGLEVBQU1vSCxVQUFVakosSUFDVCxFQUVULEdBQUtXLEVBQUl1RyxJQUlULElBQUssSUFERGdDLEVBQVd2SSxFQUFJdUcsSUFBSW5DLE1BQU0sS0FDcEJvRSxFQUFLLEVBQUdBLEVBQUtELEVBQVN6SixRQUN4QnlKLEVBQVNDLEdBRHVCQSxJQUlyQyxHQUFJTixFQUFhNUosS0FBS2lLLEVBQVNDLEdBQUl4SCxRQUVqQyxPQURBRSxFQUFNb0gsVUFBVWpKLElBQ1QsUUFRckI2QixFQUFNMkMsSUFBSWYsSUFFUjJGLFVBQVcsU0FBU3RCLEdBQ2xCQSxFQUFFdUIsaUJBQ0Z2QixFQUFFd0IsbUJBRUpDLE1BQU8sV0FLTCxPQUpBMUgsRUFBTTJILE9BQU9uTSxFQUFFUyxNQUFNMkwsS0FBSyxXQUluQixNQVViaEIsV0FBWSxTQUFTWCxHQUNuQixJQUNJNEIsRUFBTTVCLEVBQUU2QixNQUNSQyxFQUZROUwsS0FFSytDLFFBQVErSSxLQUVyQkMsRUFBWXhNLEVBQUV5TSxRQUFRSixFQUFLRSxFQUFLRyxXQUFhLEVBQzdDQyxFQUFZM00sRUFBRXlNLFFBQVFKLEVBQUtFLEVBQUtLLE9BQVMsRUFDekNDLEVBQWM3TSxFQUFFeU0sUUFBUUosRUFBS0UsRUFBS0osU0FBVyxFQUM3Q1csRUFBWTlNLEVBQUV5TSxRQUFRSixFQUFLRSxFQUFLbkwsT0FBUyxFQUN6QzJMLEVBUlF0TSxLQVFJRSxNQUFNTyxlQUNsQjhMLEVBQXFCUixHQUFxQixJQUFSTyxHQUFlSixHQUFjSSxFQUFNLElBVDdEdE0sS0FTMEV3RSxNQUFNN0MsT0FDeEY2SyxFQUFXLEVBUWYsR0FMYSxLQUFSWixHQUFzQixLQUFSQSxHQUNqQjVCLEVBQUV1QixpQkFJQ1EsR0FBYUcsRUFBWSxDQUM1QixJQW5CVWxNLEtBbUJFK0MsUUFBUTBKLFdBQWFGLEVBQy9CLE9BR0dSLElBQ0hTLEVBeEJReE0sS0F3QlNpQixNQUFNdUIsb0JBeEJmeEMsS0F3QnlDNEgsWUFBYTBFLElBRzNESixJQUNITSxFQTVCUXhNLEtBNEJTaUIsTUFBTW1CLGdCQTVCZnBDLEtBNEJxQzRILFlBQWEwRSxJQTVCbER0TSxLQStCSm1MLFVBQVVxQixHQUlsQixHQUFLSixHQW5DT3BNLEtBbUNjRSxNQUFNSSxPQU85QixPQTFDVU4sS0FvQ0owTCxPQUFPWSxRQXBDSHRNLEtBc0NFRSxNQUFNQyxVQXRDUkgsS0FzQzJCK0MsUUFBUTVDLFNBQVN1TSxjQXRDNUMxTSxLQXVDRlksU0FPTHlMLElBOUNPck0sS0E4Q2FFLE1BQU1JLFFBOUNuQk4sS0ErQ0pXLFFBS1ZHLFFBQVMsV0FDS2QsS0FFTjhGLFdBRk05RixLQUdOK0YsV0FITS9GLEtBSU5pQixNQUFNeUIsZ0JBQWdCLFVBSmhCMUMsT0FRZDJNLHFCQUFzQixXQUNwQixJQUlJM0csRUFKUWhHLEtBSWV3RixTQUFTaEIsTUFBTXlCLFFBQVEsWUFBWUMsU0FBUyxXQUFXUixTQUp0RTFGLEtBSXFGbUUsUUFBUWdDLFVBQ3JHeUcsRUFMUTVNLEtBS1UrQyxRQUFRNkosVUFDMUJDLEVBTlE3TSxLQU1Xd0YsU0FBU2hCLE1BQU1zSSxhQUNsQ0MsRUFQUS9NLEtBT2F3RixTQUFTWixRQUFRa0ksY0FBZ0JELEVBUDlDN00sS0FPaUV3RixTQUFTaEIsTUFBTTZCLFVBUGhGckcsS0FVQStDLFFBQVFpSyxrQkFBb0JELEVBQWVGLEVBVjNDN00sS0FXSmlOLFdBQWFGLEdBWFQvTSxLQWNKd0YsU0FBU2hCLE1BQU0wSSxJQUFJLFdBQVksVUFkM0JsTixLQWlCSndGLFNBQVNQLGFBQWFvQixNQUFNLEtBakJ4QnJHLEtBa0JKaU4sV0FsQklqTixLQWtCZXdGLFNBQVNoQixNQUFNNkIsUUFsQjlCckcsS0FvQkp3RixTQUFTaEIsTUFBTTBJLElBQUksV0FBWSxJQXBCM0JsTixLQXFCSndGLFNBQVNQLGFBQWFvQixNQUFNLEtBckJ4QnJHLEtBd0JOd0YsU0FBU2hCLE1BQU02QixNQXhCVHJHLEtBd0JxQmlOLFlBQVlFLFNBQVdQLEdBeEI1QzVNLEtBd0IrRHdGLFNBQVNoQixNQUFNMkksT0FBT1AsR0FHakc1RyxFQUFlTSxZQTNCSHRHLEtBMkJxQm1FLFFBQVFnQyxXQUkzQ2lILGFBQWMsV0FHWixJQUF1QyxJQUYzQnBOLEtBRUYrQyxRQUFRc0ssaUJBRk5yTixLQUdKd0YsU0FBU1AsYUFBYVMsU0FIbEIxRixLQUdpQ21FLFFBQVFtSixZQUM5QyxJQUF1QyxJQUpsQ3ROLEtBSUsrQyxRQUFRd0ssaUJBSmJ2TixLQUtKd0YsU0FBU1AsYUFBYVMsU0FMbEIxRixLQUtpQ21FLFFBQVFxSixXQUM5QyxDQUNMLElBQUlDLEVBQVkvTixFQUFLK04sWUFDakJDLEVBQVloTyxFQUFLeU4sU0FDakJRLEVBVE0zTixLQVNTd0YsU0FBU1AsYUFBYTJJLFNBQVNDLElBRzlDQyxFQUFZSCxFQVpOM04sS0FVV3dGLFNBQVNQLGFBQWE4SSxjQVZqQy9OLEtBWWdDZ08sYUFBaUJQLEVBQVlDLEVBQ25FTyxFQUFhTixFQWJQM04sS0Fhc0JnTyxZQUFlUCxFQU0zQ1MsR0FBZUosR0FBWUcsRUFDM0JFLEdBQWVELEVBcEJUbE8sS0FzQkp3RixTQUFTUCxhQUFhZ0YsWUF0QmxCakssS0FzQm9DbUUsUUFBUW1KLE1BQU9ZLEdBdEJuRGxPLEtBdUJKd0YsU0FBU1AsYUFBYWdGLFlBdkJsQmpLLEtBdUJvQ21FLFFBQVFxSixNQUFPVyxLQVNqRUMscUJBQXNCLFNBQVN2RyxHQUM3QixJQUNJd0csRUFEUXJPLEtBQ1kwRyxJQUFJNEIsT0FBTyxnQkFEdkJ0SSxLQUdERSxNQUFNQyxXQUlmMEgsRUFBU3RJLEVBQUVpSSxRQUFRSyxJQUEyQixJQUFqQkEsRUFBTWxHLE9BQWdCLEVBQUlrRyxFQUN2REEsRUFBUXRJLEVBQUVpSSxRQUFRSyxHQUFTeUcsS0FBS0MsSUFBSWxMLE1BQU1pTCxLQUFNekcsR0FBU0EsR0FHM0QsSUFBSTJHLEVBQVdILEVBQVlJLEdBQUc1RyxHQUFPa0csY0FDakNXLEVBQVFMLEVBQVl4RyxHQUFPOEcsVUFDM0JDLEVBYlE1TyxLQWFld0YsU0FBU2QsWUFBWStJLFlBQzVDb0IsRUFBVUgsRUFBbUIsRUFBWEYsRUFkVnhPLEtBZ0JOd0YsU0FBU2QsWUFBWStJLFVBQ3pCb0IsRUFBVUQsRUFqQkE1TyxLQWlCdUJnTyxZQUFjYSxFQWpCckM3TyxLQWlCcURnTyxZQUM3RFUsRUFBUUYsRUFBV0ksRUFBaUJGLEVBQVFGLEVBQzFDSSxJQVNSak8sS0FBTSxTQUFTcUosR0FDYixJQUFJakcsRUFBUS9ELEtBRVosR0FBSytELEVBQU1oQixRQUFRMEMsZ0JBQWtCMUIsRUFBTTlDLE1BQU1DLFdBQy9DLE9BQU8sRUFHVDZDLEVBQU05QyxNQUFNeUIsZ0JBQWdCLGFBQWNxQixHQUVyQ2lHLElBQ0hBLEVBQUV1QixpQkFDRXhILEVBQU1oQixRQUFReUksaUJBQ2hCeEIsRUFBRXdCLG1CQUlEekgsRUFBTTdELE1BQU1HLFVBQ2YwRCxFQUFNNEksdUJBR05wTixFQUFFLElBQU13RSxFQUFNSSxRQUFRb0IsV0FBWSxJQUFNeEIsRUFBTUksUUFBUXhELE1BQU11RixXQUFxQixVQUFFLFNBRW5GbkMsRUFBTTdELE1BQU1JLFFBQVMsRUFDckJ5RCxFQUFNaUssWUFBY2pLLEVBQU15QixTQUFTaEIsTUFBTXVKLGNBQ3pDaEssRUFBTStLLGlCQUFtQi9LLEVBQU15QixTQUFTaEIsTUFBTTJJLFNBRzlDcEosRUFBTXlCLFNBQVNQLGFBQWFTLFNBQVMzQixFQUFNSSxRQUFReEQsTUFHbkRvRCxFQUFNeUIsU0FBU25CLE1BQU00RSxJQUFJLElBQ3BCZSxHQUFnQixZQUFYQSxFQUFFRyxNQUNWcEcsRUFBTXlCLFNBQVNuQixNQUFNcUcsUUFJdkJILFdBQVcsV0FDVC9LLEVBQ0dtRyxHQUFHLFdBQWdDcEcsRUFBRWlMLE1BQU16RyxFQUFNbkQsTUFBT21ELElBQ3hENEIsR0FBRyxZQUFpQ3BHLEVBQUVpTCxNQUFNekcsRUFBTXFKLGFBQWNySixLQUNsRSxHQUVIQSxFQUFNcUosZUFHRHJKLEVBQU1oQixRQUFRZ00scUJBRWpCdlAsRUFBS21HLEdBQUcsa0NBQWdGLElBQU01QixFQUFNSSxRQUFRUSxPQUFRLFNBQVNxRixHQUMzSCxJQUFJZ0YsRUFBV2hGLEVBQUVpRixjQUNieEIsRUFBWWxPLEVBQUVTLE1BQU15TixZQUNwQnlCLEVBQVMsRUFFUixXQUFpQkYsSUFBYUUsR0FBNEIsRUFBbkJGLEVBQVNHLFFBQ2hELGVBQWlCSCxJQUFhRSxFQUFTRixFQUFTSSxZQUNoRCxnQkFBaUJKLElBQWFFLEVBQVNGLEVBQVNLLGFBQ2hELFdBQWlCTCxJQUFhRSxHQUE0QixFQUFuQkYsRUFBU0UsU0FFaER6QixJQUFlek4sS0FBS3NQLGFBQWV2TCxFQUFNK0ssa0JBQXFCSSxFQUFTLEdBQW1CLElBQWR6QixHQUFtQnlCLEVBQVMsSUFDM0dsRixFQUFFdUIsbUJBS1J4SCxFQUFNcUsscUJBQXFCckssRUFBTTdELE1BQU1NLGFBRXZDdUQsRUFBTW9ILFVBQVVwSCxFQUFNN0QsTUFBTUMsVUFBWSxFQUFJNEQsRUFBTTdELE1BQU1NLGFBRXhEdUQsRUFBTTlDLE1BQU15QixnQkFBZ0IsT0FBUXFCLEtBS3hDbkQsTUFBTyxXQUNPWixLQUVOaUIsTUFBTXlCLGdCQUFnQixjQUZoQjFDLE1BS1pSLEVBQUt1SyxJQWgzQmtCLE9BMjJCWC9KLEtBUU53RixTQUFTUCxhQUFhcUIsWUFSaEJ0RyxLQVFrQ21FLFFBQVF4RCxNQVIxQ1gsS0FVTkUsTUFBTUksUUFBUyxFQVZUTixLQVlOaUIsTUFBTXlCLGdCQUFnQixRQVpoQjFDLE9BZ0JkdVAsT0FBUSxXQUNOLElBQUl4TCxFQUFRL0QsS0FFWitELEVBQU05QyxNQUFNeUIsZ0JBQWdCLGVBQWdCcUIsR0FFdkNBLEVBQU03RCxNQUFNQyxVQUVmWixFQUFFeUgsS0FBS2pELEVBQU02RCxZQUFhLFNBQVMwRSxHQUNqQ3ZJLEVBQU02RCxZQUFZMEUsR0FBS2hLLFVBQVcsRUFDbEN5QixFQUFNOUQsU0FBUzJHLEtBQUssVUFBVWYsS0FBSyxZQUFZLEtBSWpEdEcsRUFBRXlILEtBQUtqRCxFQUFNN0QsTUFBTU0sWUFBYSxTQUFTOEwsRUFBSzNFLEdBQzVDNUQsRUFBTTZELFlBQVlELEdBQU9yRixVQUFXLEVBQ3BDeUIsRUFBTTlELFNBQVMyRyxLQUFLLFVBQVU2SCxHQUFHOUcsR0FBTzlCLEtBQUssWUFBWSxLQUczRDlCLEVBQU03RCxNQUFNSyxVQUFZd0QsRUFBTTdELE1BQU1NLFlBRXBDdUQsRUFBTXNELFdBRU50RCxFQUFNOUMsTUFBTXlCLGdCQUFnQixTQUFVcUIsSUFDNUJBLEVBQU03RCxNQUFNSyxZQUFjd0QsRUFBTTdELE1BQU1NLGNBRWhEdUQsRUFBTTlELFNBQ0g0RixLQUFLLGdCQUFpQjlCLEVBQU03RCxNQUFNSyxVQUFZd0QsRUFBTTdELE1BQU1NLGFBQzFEbUwsS0FBSyxRQUFTNUgsRUFBTTZELFlBQVk3RCxFQUFNN0QsTUFBTU0sYUFBYXdILE1BRzVEakUsRUFBTXNELFdBRU50RCxFQUFNOUMsTUFBTXlCLGdCQUFnQixTQUFVcUIsS0FRMUNvSCxVQUFXLFNBQVN0RCxHQUNsQixJQUNJd0csRUFEUXJPLEtBQ1kwRyxJQUFJNEIsT0FBTyxnQkFBZ0JoQyxZQUFZLGVBRG5EdEcsS0FHTmlCLE1BQU15QixnQkFBZ0Isa0JBSGhCMUMsV0FNR1osSUFBVnlJLElBQWtDLElBQVhBLEdBTmhCN0gsS0FNc0M0SCxZQUFZQyxHQUFPdEYsV0FJckU4TCxFQUNHSSxHQVhTek8sS0FXQUUsTUFBTU8sZUFBaUJvSCxHQUNoQ25DLFNBQVMsZUFaQTFGLEtBY05vTyxxQkFBcUJ2RyxHQWRmN0gsS0FnQk5pQixNQUFNeUIsZ0JBQWdCLFlBaEJoQjFDLFFBd0JkMEwsT0FBUSxTQUFTN0QsR0FDZixJQUFJOUQsRUFBUS9ELEtBQ1JxTyxFQUFjdEssRUFBTTJDLElBQUk0QixPQUFPLGdCQUtuQyxHQUhBdkUsRUFBTTlDLE1BQU15QixnQkFBZ0IsZUFBZ0JxQixFQUFPOEQsUUFHcEN6SSxJQUFWeUksSUFBa0MsSUFBWEEsSUFBZ0I5RCxFQUFNNkQsWUFBWUMsR0FBT3RGLFNBQXJFLENBSUEsR0FBS3dCLEVBQU03RCxNQUFNQyxTQUFXLENBRTFCNEQsRUFBTTdELE1BQU1NLFlBQWNqQixFQUFFaUksUUFBUXpELEVBQU03RCxNQUFNTSxhQUFldUQsRUFBTTdELE1BQU1NLGFBQWV1RCxFQUFNN0QsTUFBTU0sYUFFdEcsSUFBSWdQLEVBQW1CalEsRUFBRXlNLFFBQVFuRSxFQUFPOUQsRUFBTTdELE1BQU1NLGNBQ3pCLElBQXRCZ1AsRUFDSHpMLEVBQU03RCxNQUFNTSxZQUFZaVAsT0FBT0QsRUFBa0IsR0FFakR6TCxFQUFNN0QsTUFBTU0sWUFBWXVILEtBQUtGLEdBRy9Cd0csRUFDRy9ILFlBQVksWUFDWmdDLE9BQU8sU0FBU1QsR0FDZixPQUFzRCxJQUEvQ3RJLEVBQUV5TSxRQUFRbkUsRUFBTzlELEVBQU03RCxNQUFNTSxlQUVyQ2tGLFNBQVMsaUJBRVoySSxFQUNHL0gsWUFBWSxZQUNabUksR0FBRzFLLEVBQU03RCxNQUFNTSxZQUFjcUgsR0FDN0JuQyxTQUFTLFlBR1IzQixFQUFNN0QsTUFBTUMsVUFBYTRELEVBQU1oQixRQUFRNUMsU0FBU3VNLGNBQ3BEM0ksRUFBTW5ELFFBR1JtRCxFQUFNd0wsU0FFTnhMLEVBQU05QyxNQUFNeUIsZ0JBQWdCLFNBQVVxQixFQUFPOEQsS0FRL0NoSCxRQUFTLFNBQVM2TyxHQUNKMVAsS0FFREUsT0FGQ0YsS0FFY0UsTUFBTUcsVUFGcEJMLEtBR0p3RixTQUFTaEIsTUFBTXNGLElBSFg5SixLQUdxQndGLFNBQVNaLFNBQVNrRixJQUh2QzlKLEtBR2lEd0YsU0FBU25CLE9BQU9zTCxTQUVyRUQsR0FMSTFQLEtBTUZDLFNBQVMyUCxXQXQvQk4sYUFzL0I2QkEsV0FBVyxTQU56QzVQLEtBU0pDLFNBQVM0RixLQUFLLFdBVFY3RixLQVM0QjRGLGtCQUFrQm1FLElBdi9CbkMsT0F1L0I2REEsSUFUeEUvSixLQVNrRlUsZUFBZW1QLFNBQVNBLFNBVDFHN1AsS0FXSkUsTUFBTUcsU0FBVSxLQU81QmQsRUFBRW9ELEdBQWEsVUFBSSxTQUFTSyxHQUMxQixPQUFPaEQsS0FBS2dILEtBQUssV0FDZixJQUFJMkUsRUFBT3BNLEVBQUVvTSxLQUFLM0wsS0FwZ0NMLGFBc2dDUjJMLElBQVNBLEVBQUt6SCxnQkFDQSxpQkFBVGxCLEdBQXFCMkksRUFBSzNJLEdBQVMySSxFQUFLM0ksS0FBVTJJLEVBQUs1SyxLQUFLaUMsR0FFcEV6RCxFQUFFb00sS0FBSzNMLEtBemdDSSxZQXlnQ2MsSUFBSUgsRUFBVUcsS0FBTWdELE9BVW5EekQsRUFBRW9ELEdBQWEsVUFBRXNCLFVBQ2Y2TCxTQUF1QixTQUFTak4sR0FBT3RELEVBQUVzRCxHQUFLME0sVUFDOUMzQyxVQUF1QixJQUN2QjFCLGlCQUF1QixJQUN2Qm5HLGtCQUF1QixpQ0FDdkJiLGlCQUF1QixFQUN2QnVCLGdCQUF1QixFQUN2QnFGLGFBQXVCLEVBQ3ZCVixhQUF1QixFQUN2QkssbUJBQXVCLElBQ3ZCdUMsa0JBQXVCLEVBQ3ZCekcsWUFBdUIsRUFDdkJ3SSxxQkFBdUIsRUFDdkJ2SSxzQkFBdUIsRUFDdkJpRyxXQUF1QixFQUN2Qlksa0JBQXVCLEVBQ3ZCRSxrQkFBdUIsRUFDdkIvQixpQkFBdUIsRUFDdkI1QixtQkFBdUIsU0FDdkJ0QyxhQUF1QixTQUN2QmdDLGFBQXVCLEVBQ3ZCd0MsTUFDRUcsVUFBWSxHQUFJLElBQ2hCRSxNQUFZLEdBQUksSUFDaEJULFFBQVksRUFBRyxHQUFJLElBQ25CL0ssTUFBWSxHQUFJLEdBQUksR0FBSSxHQUFJLEdBQUksSUFDaENDLE9BQVksRUFBRyxLQUVqQmtHLGFBQ0VqQyxPQWhqQ2EsWUFpakNidUMsV0FBVyxHQUViakgsVUFDRThILFVBQVcsS0FDWHlFLGNBQWMsRUFDZDVFLGlCQUFpQiIsImZpbGUiOiJqcXVlcnkuc2VsZWN0cmljLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKGZhY3RvcnkpIHtcclxuICAvKiBnbG9iYWwgZGVmaW5lICovXHJcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cclxuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcclxuICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcclxuICB9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cyApIHtcclxuICAgIC8vIE5vZGUvQ29tbW9uSlNcclxuICAgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oIHJvb3QsIGpRdWVyeSApIHtcclxuICAgICAgaWYgKCBqUXVlcnkgPT09IHVuZGVmaW5lZCApIHtcclxuICAgICAgICBpZiAoIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICkge1xyXG4gICAgICAgICAgalF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGpRdWVyeSA9IHJlcXVpcmUoJ2pxdWVyeScpKHJvb3QpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBmYWN0b3J5KGpRdWVyeSk7XHJcbiAgICAgIHJldHVybiBqUXVlcnk7XHJcbiAgICB9O1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgIGZhY3RvcnkoalF1ZXJ5KTtcclxuICB9XHJcbn0oZnVuY3Rpb24oJCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgdmFyICRkb2MgPSAkKGRvY3VtZW50KTtcclxuICB2YXIgJHdpbiA9ICQod2luZG93KTtcclxuXHJcbiAgdmFyIHBsdWdpbk5hbWUgPSAnc2VsZWN0cmljJztcclxuICB2YXIgY2xhc3NMaXN0ID0gJ0lucHV0IEl0ZW1zIE9wZW4gRGlzYWJsZWQgVGVtcFNob3cgSGlkZVNlbGVjdCBXcmFwcGVyIEZvY3VzIEhvdmVyIFJlc3BvbnNpdmUgQWJvdmUgQmVsb3cgU2Nyb2xsIEdyb3VwIEdyb3VwTGFiZWwnO1xyXG4gIHZhciBldmVudE5hbWVzcGFjZVN1ZmZpeCA9ICcuc2wnO1xyXG5cclxuICB2YXIgY2hhcnMgPSBbJ2EnLCAnZScsICdpJywgJ28nLCAndScsICduJywgJ2MnLCAneSddO1xyXG4gIHZhciBkaWFjcml0aWNzID0gW1xyXG4gICAgL1tcXHhFMC1cXHhFNV0vZywgLy8gYVxyXG4gICAgL1tcXHhFOC1cXHhFQl0vZywgLy8gZVxyXG4gICAgL1tcXHhFQy1cXHhFRl0vZywgLy8gaVxyXG4gICAgL1tcXHhGMi1cXHhGNl0vZywgLy8gb1xyXG4gICAgL1tcXHhGOS1cXHhGQ10vZywgLy8gdVxyXG4gICAgL1tcXHhGMV0vZywgICAgICAvLyBuXHJcbiAgICAvW1xceEU3XS9nLCAgICAgIC8vIGNcclxuICAgIC9bXFx4RkQtXFx4RkZdL2cgIC8vIHlcclxuICBdO1xyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgU2VsZWN0cmljXHJcbiAgICpcclxuICAgKiBAY29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0ge05vZGV9IGVsZW1lbnQgLSBUaGUgJmx0O3NlbGVjdCZndDsgZWxlbWVudFxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSAgb3B0cyAtIE9wdGlvbnNcclxuICAgKi9cclxuICB2YXIgU2VsZWN0cmljID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0cykge1xyXG4gICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgIF90aGlzLiRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuXHJcbiAgICBfdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgbXVsdGlwbGUgICAgICAgOiAhIV90aGlzLiRlbGVtZW50LmF0dHIoJ211bHRpcGxlJyksXHJcbiAgICAgIGVuYWJsZWQgICAgICAgIDogZmFsc2UsXHJcbiAgICAgIG9wZW5lZCAgICAgICAgIDogZmFsc2UsXHJcbiAgICAgIGN1cnJWYWx1ZSAgICAgIDogLTEsXHJcbiAgICAgIHNlbGVjdGVkSWR4ICAgIDogLTEsXHJcbiAgICAgIGhpZ2hsaWdodGVkSWR4IDogLTFcclxuICAgIH07XHJcblxyXG4gICAgX3RoaXMuZXZlbnRUcmlnZ2VycyA9IHtcclxuICAgICAgb3BlbiAgICA6IF90aGlzLm9wZW4sXHJcbiAgICAgIGNsb3NlICAgOiBfdGhpcy5jbG9zZSxcclxuICAgICAgZGVzdHJveSA6IF90aGlzLmRlc3Ryb3ksXHJcbiAgICAgIHJlZnJlc2ggOiBfdGhpcy5yZWZyZXNoLFxyXG4gICAgICBpbml0ICAgIDogX3RoaXMuaW5pdFxyXG4gICAgfTtcclxuXHJcbiAgICBfdGhpcy5pbml0KG9wdHMpO1xyXG4gIH07XHJcblxyXG4gIFNlbGVjdHJpYy5wcm90b3R5cGUgPSB7XHJcbiAgICB1dGlsczoge1xyXG4gICAgICAvKipcclxuICAgICAgICogRGV0ZWN0IG1vYmlsZSBicm93c2VyXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcbiAgICAgICAqL1xyXG4gICAgICBpc01vYmlsZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIC9hbmRyb2lkfGlwKGhvbmV8b2R8YWQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBFc2NhcGUgZXNwZWNpYWwgY2hhcmFjdGVycyBpbiBzdHJpbmcgKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvR3VpZGUvUmVndWxhcl9FeHByZXNzaW9ucylcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7c3RyaW5nfSBzdHIgLSBUaGUgc3RyaW5nIHRvIGJlIGVzY2FwZWRcclxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICBUaGUgc3RyaW5nIHdpdGggdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBlc2NhcGVkXHJcbiAgICAgICAqL1xyXG4gICAgICBlc2NhcGVSZWdFeHA6IGZ1bmN0aW9uKHN0cikge1xyXG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKTsgLy8gJCYgbWVhbnMgdGhlIHdob2xlIG1hdGNoZWQgc3RyaW5nXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVwbGFjZSBkaWFjcml0aWNzXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3RyIC0gVGhlIHN0cmluZyB0byByZXBsYWNlIHRoZSBkaWFjcml0aWNzXHJcbiAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgVGhlIHN0cmluZyB3aXRoIGRpYWNyaXRpY3MgcmVwbGFjZWQgd2l0aCBhc2NpaSBjaGFyYWN0ZXJzXHJcbiAgICAgICAqL1xyXG4gICAgICByZXBsYWNlRGlhY3JpdGljczogZnVuY3Rpb24oc3RyKSB7XHJcbiAgICAgICAgdmFyIGsgPSBkaWFjcml0aWNzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGstLSkge1xyXG4gICAgICAgICAgc3RyID0gc3RyLnRvTG93ZXJDYXNlKCkucmVwbGFjZShkaWFjcml0aWNzW2tdLCBjaGFyc1trXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEZvcm1hdCBzdHJpbmdcclxuICAgICAgICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vYXRlc2dvcmFsLzk4NDM3NVxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGYgLSBTdHJpbmcgdG8gYmUgZm9ybWF0ZWRcclxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSAgICAgU3RyaW5nIGZvcm1hdGVkXHJcbiAgICAgICAqL1xyXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uKGYpIHtcclxuICAgICAgICB2YXIgYSA9IGFyZ3VtZW50czsgLy8gc3RvcmUgb3V0ZXIgYXJndW1lbnRzXHJcbiAgICAgICAgcmV0dXJuICgnJyArIGYpIC8vIGZvcmNlIGZvcm1hdCBzcGVjaWZpZXIgdG8gU3RyaW5nXHJcbiAgICAgICAgICAucmVwbGFjZSggLy8gcmVwbGFjZSB0b2tlbnMgaW4gZm9ybWF0IHNwZWNpZmllclxyXG4gICAgICAgICAgICAvXFx7KD86KFxcZCspfChcXHcrKSlcXH0vZywgLy8gbWF0Y2gge3Rva2VufSByZWZlcmVuY2VzXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKFxyXG4gICAgICAgICAgICAgIHMsIC8vIHRoZSBtYXRjaGVkIHN0cmluZyAoaWdub3JlZClcclxuICAgICAgICAgICAgICBpLCAvLyBhbiBhcmd1bWVudCBpbmRleFxyXG4gICAgICAgICAgICAgIHAgLy8gYSBwcm9wZXJ0eSBuYW1lXHJcbiAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgIHJldHVybiBwICYmIGFbMV0gLy8gaWYgcHJvcGVydHkgbmFtZSBhbmQgZmlyc3QgYXJndW1lbnQgZXhpc3RcclxuICAgICAgICAgICAgICAgID8gYVsxXVtwXSAvLyByZXR1cm4gcHJvcGVydHkgZnJvbSBmaXJzdCBhcmd1bWVudFxyXG4gICAgICAgICAgICAgICAgOiBhW2ldOyAvLyBhc3N1bWUgYXJndW1lbnQgaW5kZXggYW5kIHJldHVybiBpLXRoIGFyZ3VtZW50XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldCB0aGUgbmV4dCBlbmFibGVkIGl0ZW0gaW4gdGhlIG9wdGlvbnMgbGlzdC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7b2JqZWN0fSBzZWxlY3RJdGVtcyAtIFRoZSBvcHRpb25zIG9iamVjdC5cclxuICAgICAgICogQHBhcmFtICB7bnVtYmVyfSAgICBzZWxlY3RlZCAtIEluZGV4IG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uLlxyXG4gICAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgICAgICAgICAgVGhlIG5leHQgZW5hYmxlZCBpdGVtLlxyXG4gICAgICAgKi9cclxuICAgICAgbmV4dEVuYWJsZWRJdGVtOiBmdW5jdGlvbihzZWxlY3RJdGVtcywgc2VsZWN0ZWQpIHtcclxuICAgICAgICB3aGlsZSAoIHNlbGVjdEl0ZW1zWyBzZWxlY3RlZCA9IChzZWxlY3RlZCArIDEpICUgc2VsZWN0SXRlbXMubGVuZ3RoIF0uZGlzYWJsZWQgKSB7XHJcbiAgICAgICAgICAvLyBlbXB0eVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VsZWN0ZWQ7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogR2V0IHRoZSBwcmV2aW91cyBlbmFibGVkIGl0ZW0gaW4gdGhlIG9wdGlvbnMgbGlzdC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7b2JqZWN0fSBzZWxlY3RJdGVtcyAtIFRoZSBvcHRpb25zIG9iamVjdC5cclxuICAgICAgICogQHBhcmFtICB7bnVtYmVyfSAgICBzZWxlY3RlZCAtIEluZGV4IG9mIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uLlxyXG4gICAgICAgKiBAcmV0dXJuIHtvYmplY3R9ICAgICAgICAgICAgICAgVGhlIHByZXZpb3VzIGVuYWJsZWQgaXRlbS5cclxuICAgICAgICovXHJcbiAgICAgIHByZXZpb3VzRW5hYmxlZEl0ZW06IGZ1bmN0aW9uKHNlbGVjdEl0ZW1zLCBzZWxlY3RlZCkge1xyXG4gICAgICAgIHdoaWxlICggc2VsZWN0SXRlbXNbIHNlbGVjdGVkID0gKHNlbGVjdGVkID4gMCA/IHNlbGVjdGVkIDogc2VsZWN0SXRlbXMubGVuZ3RoKSAtIDEgXS5kaXNhYmxlZCApIHtcclxuICAgICAgICAgIC8vIGVtcHR5XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZWxlY3RlZDtcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUcmFuc2Zvcm0gY2FtZWxDYXNlIHN0cmluZyB0byBkYXNoLWNhc2UuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3RyIC0gVGhlIGNhbWVsQ2FzZWQgc3RyaW5nLlxyXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9ICAgICAgIFRoZSBzdHJpbmcgdHJhbnNmb3JtZWQgdG8gZGFzaC1jYXNlLlxyXG4gICAgICAgKi9cclxuICAgICAgdG9EYXNoOiBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbYS16MC05XSkoW0EtWl0pL2csICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ2FsbHMgdGhlIGV2ZW50cyByZWdpc3RlcmVkIHdpdGggZnVuY3Rpb24gbmFtZS5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtzdHJpbmd9ICAgIGZuIC0gVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uLlxyXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gc2NvcGUgLSBTY29wZSB0aGF0IHNob3VsZCBiZSBzZXQgb24gdGhlIGZ1bmN0aW9uLlxyXG4gICAgICAgKi9cclxuICAgICAgdHJpZ2dlckNhbGxiYWNrOiBmdW5jdGlvbihmbiwgc2NvcGUpIHtcclxuICAgICAgICB2YXIgZWxtID0gc2NvcGUuZWxlbWVudDtcclxuICAgICAgICB2YXIgZnVuYyA9IHNjb3BlLm9wdGlvbnNbJ29uJyArIGZuXTtcclxuICAgICAgICB2YXIgYXJncyA9IFtlbG1dLmNvbmNhdChbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykuc2xpY2UoMSkpO1xyXG5cclxuICAgICAgICBpZiAoICQuaXNGdW5jdGlvbihmdW5jKSApIHtcclxuICAgICAgICAgIGZ1bmMuYXBwbHkoZWxtLCBhcmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoZWxtKS50cmlnZ2VyKHBsdWdpbk5hbWUgKyAnLScgKyB0aGlzLnRvRGFzaChmbiksIGFyZ3MpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFRyYW5zZm9ybSBhcnJheSBsaXN0IHRvIGNvbmNhdGVuYXRlZCBzdHJpbmcgYW5kIHJlbW92ZSBlbXB0eSB2YWx1ZXNcclxuICAgICAgICogQHBhcmFtICB7YXJyYXl9IGFyciAtIENsYXNzIGxpc3RcclxuICAgICAgICogQHJldHVybiB7c3RyaW5nfSAgICAgIENvbmNhdGVuYXRlZCBzdHJpbmdcclxuICAgICAgICovXHJcbiAgICAgIGFycmF5VG9DbGFzc25hbWU6IGZ1bmN0aW9uKGFycikge1xyXG4gICAgICAgIHZhciBuZXdBcnIgPSAkLmdyZXAoYXJyLCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICByZXR1cm4gISFpdGVtO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gJC50cmltKG5ld0Fyci5qb2luKCcgJykpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBJbml0aWFsaXplcyAqL1xyXG4gICAgaW5pdDogZnVuY3Rpb24ob3B0cykge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgLy8gU2V0IG9wdGlvbnNcclxuICAgICAgX3RoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkLmZuW3BsdWdpbk5hbWVdLmRlZmF1bHRzLCBfdGhpcy5vcHRpb25zLCBvcHRzKTtcclxuXHJcbiAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQmVmb3JlSW5pdCcsIF90aGlzKTtcclxuXHJcbiAgICAgIC8vIFByZXNlcnZlIGRhdGFcclxuICAgICAgX3RoaXMuZGVzdHJveSh0cnVlKTtcclxuXHJcbiAgICAgIC8vIERpc2FibGUgb24gbW9iaWxlIGJyb3dzZXJzXHJcbiAgICAgIGlmICggX3RoaXMub3B0aW9ucy5kaXNhYmxlT25Nb2JpbGUgJiYgX3RoaXMudXRpbHMuaXNNb2JpbGUoKSApIHtcclxuICAgICAgICBfdGhpcy5kaXNhYmxlT25Nb2JpbGUgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gR2V0IGNsYXNzZXNcclxuICAgICAgX3RoaXMuY2xhc3NlcyA9IF90aGlzLmdldENsYXNzTmFtZXMoKTtcclxuXHJcbiAgICAgIC8vIENyZWF0ZSBlbGVtZW50c1xyXG4gICAgICB2YXIgaW5wdXQgICAgICAgICAgICAgID0gJCgnPGlucHV0Lz4nLCB7ICdjbGFzcyc6IF90aGlzLmNsYXNzZXMuaW5wdXQsICdyZWFkb25seSc6IF90aGlzLnV0aWxzLmlzTW9iaWxlKCkgfSk7XHJcbiAgICAgIHZhciBpdGVtcyAgICAgICAgICAgICAgPSAkKCc8ZGl2Lz4nLCAgIHsgJ2NsYXNzJzogX3RoaXMuY2xhc3Nlcy5pdGVtcywgJ3RhYmluZGV4JzogLTEgfSk7XHJcbiAgICAgIHZhciBpdGVtc1Njcm9sbCAgICAgICAgPSAkKCc8ZGl2Lz4nLCAgIHsgJ2NsYXNzJzogX3RoaXMuY2xhc3Nlcy5zY3JvbGwgfSk7XHJcbiAgICAgIHZhciB3cmFwcGVyICAgICAgICAgICAgPSAkKCc8ZGl2Lz4nLCAgIHsgJ2NsYXNzJzogX3RoaXMuY2xhc3Nlcy5wcmVmaXgsICdodG1sJzogX3RoaXMub3B0aW9ucy5hcnJvd0J1dHRvbk1hcmt1cCB9KTtcclxuICAgICAgdmFyIGxhYmVsICAgICAgICAgICAgICA9ICQoJzxzcGFuLz4nLCAgeyAnY2xhc3MnOiAnbGFiZWwnIH0pO1xyXG4gICAgICB2YXIgb3V0ZXJXcmFwcGVyICAgICAgID0gX3RoaXMuJGVsZW1lbnQud3JhcCgnPGRpdi8+JykucGFyZW50KCkuYXBwZW5kKHdyYXBwZXIucHJlcGVuZChsYWJlbCksIGl0ZW1zLCBpbnB1dCk7XHJcbiAgICAgIHZhciBoaWRlU2VsZWN0V3JhcHBlciAgPSAkKCc8ZGl2Lz4nLCAgIHsgJ2NsYXNzJzogX3RoaXMuY2xhc3Nlcy5oaWRlc2VsZWN0IH0pO1xyXG5cclxuICAgICAgX3RoaXMuZWxlbWVudHMgPSB7XHJcbiAgICAgICAgaW5wdXQgICAgICAgIDogaW5wdXQsXHJcbiAgICAgICAgaXRlbXMgICAgICAgIDogaXRlbXMsXHJcbiAgICAgICAgaXRlbXNTY3JvbGwgIDogaXRlbXNTY3JvbGwsXHJcbiAgICAgICAgd3JhcHBlciAgICAgIDogd3JhcHBlcixcclxuICAgICAgICBsYWJlbCAgICAgICAgOiBsYWJlbCxcclxuICAgICAgICBvdXRlcldyYXBwZXIgOiBvdXRlcldyYXBwZXJcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGlmICggX3RoaXMub3B0aW9ucy5uYXRpdmVPbk1vYmlsZSAmJiBfdGhpcy51dGlscy5pc01vYmlsZSgpICkge1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLmlucHV0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGhpZGVTZWxlY3RXcmFwcGVyLmFkZENsYXNzKF90aGlzLmNsYXNzZXMucHJlZml4ICsgJy1pcy1uYXRpdmUnKTtcclxuXHJcbiAgICAgICAgX3RoaXMuJGVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgX3RoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBfdGhpcy4kZWxlbWVudFxyXG4gICAgICAgIC5vbihfdGhpcy5ldmVudFRyaWdnZXJzKVxyXG4gICAgICAgIC53cmFwKGhpZGVTZWxlY3RXcmFwcGVyKTtcclxuXHJcbiAgICAgIF90aGlzLm9yaWdpbmFsVGFiaW5kZXggPSBfdGhpcy4kZWxlbWVudC5wcm9wKCd0YWJpbmRleCcpO1xyXG4gICAgICBfdGhpcy4kZWxlbWVudC5wcm9wKCd0YWJpbmRleCcsIC0xKTtcclxuXHJcbiAgICAgIF90aGlzLnBvcHVsYXRlKCk7XHJcbiAgICAgIF90aGlzLmFjdGl2YXRlKCk7XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0luaXQnLCBfdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBBY3RpdmF0ZXMgdGhlIHBsdWdpbiAqL1xyXG4gICAgYWN0aXZhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICB2YXIgaGlkZGVuQ2hpbGRyZW4gPSBfdGhpcy5lbGVtZW50cy5pdGVtcy5jbG9zZXN0KCc6dmlzaWJsZScpLmNoaWxkcmVuKCc6aGlkZGVuJykuYWRkQ2xhc3MoX3RoaXMuY2xhc3Nlcy50ZW1wc2hvdyk7XHJcbiAgICAgIHZhciBvcmlnaW5hbFdpZHRoID0gX3RoaXMuJGVsZW1lbnQud2lkdGgoKTtcclxuXHJcbiAgICAgIGhpZGRlbkNoaWxkcmVuLnJlbW92ZUNsYXNzKF90aGlzLmNsYXNzZXMudGVtcHNob3cpO1xyXG5cclxuICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdCZWZvcmVBY3RpdmF0ZScsIF90aGlzKTtcclxuXHJcbiAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci5wcm9wKCdjbGFzcycsXHJcbiAgICAgICAgX3RoaXMudXRpbHMuYXJyYXlUb0NsYXNzbmFtZShbXHJcbiAgICAgICAgICBfdGhpcy5jbGFzc2VzLndyYXBwZXIsXHJcbiAgICAgICAgICBfdGhpcy4kZWxlbWVudC5wcm9wKCdjbGFzcycpLnJlcGxhY2UoL1xcUysvZywgX3RoaXMuY2xhc3Nlcy5wcmVmaXggKyAnLSQmJyksXHJcbiAgICAgICAgICBfdGhpcy5vcHRpb25zLnJlc3BvbnNpdmUgPyBfdGhpcy5jbGFzc2VzLnJlc3BvbnNpdmUgOiAnJ1xyXG4gICAgICAgIF0pXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoIF90aGlzLm9wdGlvbnMuaW5oZXJpdE9yaWdpbmFsV2lkdGggJiYgb3JpZ2luYWxXaWR0aCA+IDAgKSB7XHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLndpZHRoKG9yaWdpbmFsV2lkdGgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBfdGhpcy51bmJpbmRFdmVudHMoKTtcclxuXHJcbiAgICAgIGlmICggIV90aGlzLiRlbGVtZW50LnByb3AoJ2Rpc2FibGVkJykgKSB7XHJcbiAgICAgICAgX3RoaXMuc3RhdGUuZW5hYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIC8vIE5vdCBkaXNhYmxlZCwgc28uLi4gUmVtb3ZpbmcgZGlzYWJsZWQgY2xhc3NcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIucmVtb3ZlQ2xhc3MoX3RoaXMuY2xhc3Nlcy5kaXNhYmxlZCk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZSBzdHlsZXMgZnJvbSBpdGVtcyBib3hcclxuICAgICAgICAvLyBGaXggaW5jb3JyZWN0IGhlaWdodCB3aGVuIHJlZnJlc2hlZCBpcyB0cmlnZ2VyZWQgd2l0aCBmZXdlciBvcHRpb25zXHJcbiAgICAgICAgX3RoaXMuJGxpID0gX3RoaXMuZWxlbWVudHMuaXRlbXMucmVtb3ZlQXR0cignc3R5bGUnKS5maW5kKCdsaScpO1xyXG5cclxuICAgICAgICBfdGhpcy5iaW5kRXZlbnRzKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLmFkZENsYXNzKF90aGlzLmNsYXNzZXMuZGlzYWJsZWQpO1xyXG5cclxuICAgICAgICBpZiAoIF90aGlzLmVsZW1lbnRzLmlucHV0ICkge1xyXG4gICAgICAgICAgX3RoaXMuZWxlbWVudHMuaW5wdXQucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQWN0aXZhdGUnLCBfdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgY2xhc3NOYW1lcyBmb3IgZWxlbWVudHNcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9IENsYXNzZXMgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGdldENsYXNzTmFtZXM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICB2YXIgY3VzdG9tQ2xhc3MgPSBfdGhpcy5vcHRpb25zLmN1c3RvbUNsYXNzO1xyXG4gICAgICB2YXIgY2xhc3Nlc09iaiA9IHt9O1xyXG5cclxuICAgICAgJC5lYWNoKGNsYXNzTGlzdC5zcGxpdCgnICcpLCBmdW5jdGlvbihpLCBjdXJyQ2xhc3MpIHtcclxuICAgICAgICB2YXIgYyA9IGN1c3RvbUNsYXNzLnByZWZpeCArIGN1cnJDbGFzcztcclxuICAgICAgICBjbGFzc2VzT2JqW2N1cnJDbGFzcy50b0xvd2VyQ2FzZSgpXSA9IGN1c3RvbUNsYXNzLmNhbWVsQ2FzZSA/IGMgOiBfdGhpcy51dGlscy50b0Rhc2goYyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY2xhc3Nlc09iai5wcmVmaXggPSBjdXN0b21DbGFzcy5wcmVmaXg7XHJcblxyXG4gICAgICByZXR1cm4gY2xhc3Nlc09iajtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqIFNldCB0aGUgbGFiZWwgdGV4dCAqL1xyXG4gICAgc2V0TGFiZWw6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICB2YXIgbGFiZWxCdWlsZGVyID0gX3RoaXMub3B0aW9ucy5sYWJlbEJ1aWxkZXI7XHJcblxyXG4gICAgICBpZiAoIF90aGlzLnN0YXRlLm11bHRpcGxlICkge1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSBjdXJyZW50VmFsdWVzIGlzIGFuIGFycmF5XHJcbiAgICAgICAgdmFyIGN1cnJlbnRWYWx1ZXMgPSAkLmlzQXJyYXkoX3RoaXMuc3RhdGUuY3VyclZhbHVlKSA/IF90aGlzLnN0YXRlLmN1cnJWYWx1ZSA6IFtfdGhpcy5zdGF0ZS5jdXJyVmFsdWVdO1xyXG4gICAgICAgIC8vIEknbSBub3QgaGFwcHkgd2l0aCB0aGlzLCBidXQgY3VycmVudFZhbHVlcyBjYW4gYmUgYW4gZW1wdHlcclxuICAgICAgICAvLyBhcnJheSBhbmQgd2UgbmVlZCB0byBmYWxsYmFjayB0byB0aGUgZGVmYXVsdCBvcHRpb24uXHJcbiAgICAgICAgY3VycmVudFZhbHVlcyA9IGN1cnJlbnRWYWx1ZXMubGVuZ3RoID09PSAwID8gWzBdIDogY3VycmVudFZhbHVlcztcclxuXHJcbiAgICAgICAgdmFyIGxhYmVsTWFya3VwID0gJC5tYXAoY3VycmVudFZhbHVlcywgZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgIHJldHVybiAkLmdyZXAoX3RoaXMubG9va3VwSXRlbXMsIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uaW5kZXggPT09IHZhbHVlO1xyXG4gICAgICAgICAgfSlbMF07IC8vIHdlIGRvbid0IHdhbnQgbmVzdGVkIGFycmF5cyBoZXJlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxhYmVsTWFya3VwID0gJC5ncmVwKGxhYmVsTWFya3VwLCBmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAvLyBIaWRlIGRlZmF1bHQgKHBsZWFzZSBjaG9vc2UpIGlmIG1vcmUgdGhlbiBvbmUgZWxlbWVudCB3ZXJlIHNlbGVjdGVkLlxyXG4gICAgICAgICAgLy8gSWYgbm8gb3B0aW9uIHZhbHVlIHdlcmUgZ2l2ZW4gdmFsdWUgaXMgc2V0IHRvIG9wdGlvbiB0ZXh0IGJ5IGRlZmF1bHRcclxuICAgICAgICAgIGlmICggbGFiZWxNYXJrdXAubGVuZ3RoID4gMSB8fCBsYWJlbE1hcmt1cC5sZW5ndGggPT09IDAgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLnRyaW0oaXRlbS52YWx1ZSkgIT09ICcnO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxhYmVsTWFya3VwID0gJC5tYXAobGFiZWxNYXJrdXAsIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgIHJldHVybiAkLmlzRnVuY3Rpb24obGFiZWxCdWlsZGVyKVxyXG4gICAgICAgICAgICA/IGxhYmVsQnVpbGRlcihpdGVtKVxyXG4gICAgICAgICAgICA6IF90aGlzLnV0aWxzLmZvcm1hdChsYWJlbEJ1aWxkZXIsIGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBMaW1pdCB0aGUgYW1vdW50IG9mIHNlbGVjdGVkIHZhbHVlcyBzaG93biBpbiBsYWJlbFxyXG4gICAgICAgIGlmICggX3RoaXMub3B0aW9ucy5tdWx0aXBsZS5tYXhMYWJlbEVudHJpZXMgKSB7XHJcbiAgICAgICAgICBpZiAoIGxhYmVsTWFya3VwLmxlbmd0aCA+PSBfdGhpcy5vcHRpb25zLm11bHRpcGxlLm1heExhYmVsRW50cmllcyArIDEgKSB7XHJcbiAgICAgICAgICAgIGxhYmVsTWFya3VwID0gbGFiZWxNYXJrdXAuc2xpY2UoMCwgX3RoaXMub3B0aW9ucy5tdWx0aXBsZS5tYXhMYWJlbEVudHJpZXMpO1xyXG4gICAgICAgICAgICBsYWJlbE1hcmt1cC5wdXNoKFxyXG4gICAgICAgICAgICAgICQuaXNGdW5jdGlvbihsYWJlbEJ1aWxkZXIpXHJcbiAgICAgICAgICAgICAgICA/IGxhYmVsQnVpbGRlcih7IHRleHQ6ICcuLi4nIH0pXHJcbiAgICAgICAgICAgICAgICA6IF90aGlzLnV0aWxzLmZvcm1hdChsYWJlbEJ1aWxkZXIsIHsgdGV4dDogJy4uLicgfSkpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGFiZWxNYXJrdXAuc2xpY2UobGFiZWxNYXJrdXAubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLmxhYmVsLmh0bWwobGFiZWxNYXJrdXAuam9pbihfdGhpcy5vcHRpb25zLm11bHRpcGxlLnNlcGFyYXRvcikpO1xyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgY3Vyckl0ZW0gPSBfdGhpcy5sb29rdXBJdGVtc1tfdGhpcy5zdGF0ZS5jdXJyVmFsdWVdO1xyXG5cclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5sYWJlbC5odG1sKFxyXG4gICAgICAgICAgJC5pc0Z1bmN0aW9uKGxhYmVsQnVpbGRlcilcclxuICAgICAgICAgICAgPyBsYWJlbEJ1aWxkZXIoY3Vyckl0ZW0pXHJcbiAgICAgICAgICAgIDogX3RoaXMudXRpbHMuZm9ybWF0KGxhYmVsQnVpbGRlciwgY3Vyckl0ZW0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKiogR2V0IGFuZCBzYXZlIHRoZSBhdmFpbGFibGUgb3B0aW9ucyAqL1xyXG4gICAgcG9wdWxhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICB2YXIgJG9wdGlvbnMgPSBfdGhpcy4kZWxlbWVudC5jaGlsZHJlbigpO1xyXG4gICAgICB2YXIgJGp1c3RPcHRpb25zID0gX3RoaXMuJGVsZW1lbnQuZmluZCgnb3B0aW9uJyk7XHJcbiAgICAgIHZhciAkc2VsZWN0ZWQgPSAkanVzdE9wdGlvbnMuZmlsdGVyKCc6c2VsZWN0ZWQnKTtcclxuICAgICAgdmFyIHNlbGVjdGVkSW5kZXggPSAkanVzdE9wdGlvbnMuaW5kZXgoJHNlbGVjdGVkKTtcclxuICAgICAgdmFyIGN1cnJJbmRleCA9IDA7XHJcbiAgICAgIHZhciBlbXB0eVZhbHVlID0gKF90aGlzLnN0YXRlLm11bHRpcGxlID8gW10gOiAwKTtcclxuXHJcbiAgICAgIGlmICggJHNlbGVjdGVkLmxlbmd0aCA+IDEgJiYgX3RoaXMuc3RhdGUubXVsdGlwbGUgKSB7XHJcbiAgICAgICAgc2VsZWN0ZWRJbmRleCA9IFtdO1xyXG4gICAgICAgICRzZWxlY3RlZC5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2VsZWN0ZWRJbmRleC5wdXNoKCQodGhpcykuaW5kZXgoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIF90aGlzLnN0YXRlLmN1cnJWYWx1ZSA9ICh+c2VsZWN0ZWRJbmRleCA/IHNlbGVjdGVkSW5kZXggOiBlbXB0eVZhbHVlKTtcclxuICAgICAgX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHggPSBfdGhpcy5zdGF0ZS5jdXJyVmFsdWU7XHJcbiAgICAgIF90aGlzLnN0YXRlLmhpZ2hsaWdodGVkSWR4ID0gX3RoaXMuc3RhdGUuY3VyclZhbHVlO1xyXG4gICAgICBfdGhpcy5pdGVtcyA9IFtdO1xyXG4gICAgICBfdGhpcy5sb29rdXBJdGVtcyA9IFtdO1xyXG5cclxuICAgICAgaWYgKCAkb3B0aW9ucy5sZW5ndGggKSB7XHJcbiAgICAgICAgLy8gQnVpbGQgb3B0aW9ucyBtYXJrdXBcclxuICAgICAgICAkb3B0aW9ucy5lYWNoKGZ1bmN0aW9uKGkpIHtcclxuICAgICAgICAgIHZhciAkZWxtID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICBpZiAoICRlbG0uaXMoJ29wdGdyb3VwJykgKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0aW9uc0dyb3VwID0ge1xyXG4gICAgICAgICAgICAgIGVsZW1lbnQgICAgICAgOiAkZWxtLFxyXG4gICAgICAgICAgICAgIGxhYmVsICAgICAgICAgOiAkZWxtLnByb3AoJ2xhYmVsJyksXHJcbiAgICAgICAgICAgICAgZ3JvdXBEaXNhYmxlZCA6ICRlbG0ucHJvcCgnZGlzYWJsZWQnKSxcclxuICAgICAgICAgICAgICBpdGVtcyAgICAgICAgIDogW11cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRlbG0uY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uKGkpIHtcclxuICAgICAgICAgICAgICB2YXIgJGVsbSA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgIG9wdGlvbnNHcm91cC5pdGVtc1tpXSA9IF90aGlzLmdldEl0ZW1EYXRhKGN1cnJJbmRleCwgJGVsbSwgb3B0aW9uc0dyb3VwLmdyb3VwRGlzYWJsZWQgfHwgJGVsbS5wcm9wKCdkaXNhYmxlZCcpKTtcclxuXHJcbiAgICAgICAgICAgICAgX3RoaXMubG9va3VwSXRlbXNbY3VyckluZGV4XSA9IG9wdGlvbnNHcm91cC5pdGVtc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgY3VyckluZGV4Kys7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgX3RoaXMuaXRlbXNbaV0gPSBvcHRpb25zR3JvdXA7XHJcblxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIF90aGlzLml0ZW1zW2ldID0gX3RoaXMuZ2V0SXRlbURhdGEoY3VyckluZGV4LCAkZWxtLCAkZWxtLnByb3AoJ2Rpc2FibGVkJykpO1xyXG5cclxuICAgICAgICAgICAgX3RoaXMubG9va3VwSXRlbXNbY3VyckluZGV4XSA9IF90aGlzLml0ZW1zW2ldO1xyXG5cclxuICAgICAgICAgICAgY3VyckluZGV4Kys7XHJcblxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBfdGhpcy5zZXRMYWJlbCgpO1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLml0ZW1zLmFwcGVuZCggX3RoaXMuZWxlbWVudHMuaXRlbXNTY3JvbGwuaHRtbCggX3RoaXMuZ2V0SXRlbXNNYXJrdXAoX3RoaXMuaXRlbXMpICkgKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlIGl0ZW1zIG9iamVjdCBkYXRhXHJcbiAgICAgKiBAcGFyYW0gIHtpbnRlZ2VyfSBpbmRleCAgICAgIC0gQ3VycmVudCBpdGVtIGluZGV4XHJcbiAgICAgKiBAcGFyYW0gIHtub2RlfSAgICAkZWxtICAgICAgIC0gQ3VycmVudCBlbGVtZW50IG5vZGVcclxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IGlzRGlzYWJsZWQgLSBDdXJyZW50IGVsZW1lbnQgZGlzYWJsZWQgc3RhdGVcclxuICAgICAqIEByZXR1cm4ge29iamVjdH0gICAgICAgICAgICAgICBJdGVtIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBnZXRJdGVtRGF0YTogZnVuY3Rpb24oaW5kZXgsICRlbG0sIGlzRGlzYWJsZWQpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5kZXggICAgIDogaW5kZXgsXHJcbiAgICAgICAgZWxlbWVudCAgIDogJGVsbSxcclxuICAgICAgICB2YWx1ZSAgICAgOiAkZWxtLnZhbCgpLFxyXG4gICAgICAgIGNsYXNzTmFtZSA6ICRlbG0ucHJvcCgnY2xhc3MnKSxcclxuICAgICAgICB0ZXh0ICAgICAgOiAkZWxtLmh0bWwoKSxcclxuICAgICAgICBzbHVnICAgICAgOiAkLnRyaW0oX3RoaXMudXRpbHMucmVwbGFjZURpYWNyaXRpY3MoJGVsbS5odG1sKCkpKSxcclxuICAgICAgICBhbHQgICAgICAgOiAkZWxtLmF0dHIoJ2RhdGEtYWx0JyksXHJcbiAgICAgICAgc2VsZWN0ZWQgIDogJGVsbS5wcm9wKCdzZWxlY3RlZCcpLFxyXG4gICAgICAgIGRpc2FibGVkICA6IGlzRGlzYWJsZWRcclxuICAgICAgfTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBvcHRpb25zIG1hcmt1cFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge29iamVjdH0gaXRlbXMgLSBPYmplY3QgY29udGFpbmluZyBhbGwgYXZhaWxhYmxlIG9wdGlvbnNcclxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gICAgICAgICBIVE1MIGZvciB0aGUgb3B0aW9ucyBib3hcclxuICAgICAqL1xyXG4gICAgZ2V0SXRlbXNNYXJrdXA6IGZ1bmN0aW9uKGl0ZW1zKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgIHZhciBtYXJrdXAgPSAnPHVsPic7XHJcblxyXG4gICAgICBpZiAoICQuaXNGdW5jdGlvbihfdGhpcy5vcHRpb25zLmxpc3RCdWlsZGVyKSAmJiBfdGhpcy5vcHRpb25zLmxpc3RCdWlsZGVyICkge1xyXG4gICAgICAgIGl0ZW1zID0gX3RoaXMub3B0aW9ucy5saXN0QnVpbGRlcihpdGVtcyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICQuZWFjaChpdGVtcywgZnVuY3Rpb24oaSwgZWxtKSB7XHJcbiAgICAgICAgaWYgKCBlbG0ubGFiZWwgIT09IHVuZGVmaW5lZCApIHtcclxuXHJcbiAgICAgICAgICBtYXJrdXAgKz0gX3RoaXMudXRpbHMuZm9ybWF0KCc8dWwgY2xhc3M9XCJ7MX1cIj48bGkgY2xhc3M9XCJ7Mn1cIj57M308L2xpPicsXHJcbiAgICAgICAgICAgIF90aGlzLnV0aWxzLmFycmF5VG9DbGFzc25hbWUoW1xyXG4gICAgICAgICAgICAgIF90aGlzLmNsYXNzZXMuZ3JvdXAsXHJcbiAgICAgICAgICAgICAgZWxtLmdyb3VwRGlzYWJsZWQgPyAnZGlzYWJsZWQnIDogJycsXHJcbiAgICAgICAgICAgICAgZWxtLmVsZW1lbnQucHJvcCgnY2xhc3MnKVxyXG4gICAgICAgICAgICBdKSxcclxuICAgICAgICAgICAgX3RoaXMuY2xhc3Nlcy5ncm91cGxhYmVsLFxyXG4gICAgICAgICAgICBlbG0uZWxlbWVudC5wcm9wKCdsYWJlbCcpXHJcbiAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICQuZWFjaChlbG0uaXRlbXMsIGZ1bmN0aW9uKGksIGVsbSkge1xyXG4gICAgICAgICAgICBtYXJrdXAgKz0gX3RoaXMuZ2V0SXRlbU1hcmt1cChlbG0uaW5kZXgsIGVsbSk7XHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBtYXJrdXAgKz0gJzwvdWw+JztcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICBtYXJrdXAgKz0gX3RoaXMuZ2V0SXRlbU1hcmt1cChlbG0uaW5kZXgsIGVsbSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm4gbWFya3VwICsgJzwvdWw+JztcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZSBldmVyeSBvcHRpb24gbWFya3VwXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBpbmRleCAgICAtIEluZGV4IG9mIGN1cnJlbnQgaXRlbVxyXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBpdGVtRGF0YSAtIEN1cnJlbnQgaXRlbVxyXG4gICAgICogQHJldHVybiB7c3RyaW5nfSAgICAgICAgICAgIEhUTUwgZm9yIHRoZSBvcHRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0SXRlbU1hcmt1cDogZnVuY3Rpb24oaW5kZXgsIGl0ZW1EYXRhKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgIHZhciBpdGVtQnVpbGRlciA9IF90aGlzLm9wdGlvbnMub3B0aW9uc0l0ZW1CdWlsZGVyO1xyXG4gICAgICAvLyBsaW1pdCBhY2Nlc3MgdG8gaXRlbSBkYXRhIHRvIHByb3ZpZGUgYSBzaW1wbGUgaW50ZXJmYWNlXHJcbiAgICAgIC8vIHRvIG1vc3QgcmVsZXZhbnQgb3B0aW9ucy5cclxuICAgICAgdmFyIGZpbHRlcmVkSXRlbURhdGEgPSB7XHJcbiAgICAgICAgdmFsdWU6IGl0ZW1EYXRhLnZhbHVlLFxyXG4gICAgICAgIHRleHQgOiBpdGVtRGF0YS50ZXh0LFxyXG4gICAgICAgIHNsdWcgOiBpdGVtRGF0YS5zbHVnLFxyXG4gICAgICAgIGluZGV4OiBpdGVtRGF0YS5pbmRleFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgcmV0dXJuIF90aGlzLnV0aWxzLmZvcm1hdCgnPGxpIGRhdGEtaW5kZXg9XCJ7MX1cIiBjbGFzcz1cInsyfVwiPnszfTwvbGk+JyxcclxuICAgICAgICBpbmRleCxcclxuICAgICAgICBfdGhpcy51dGlscy5hcnJheVRvQ2xhc3NuYW1lKFtcclxuICAgICAgICAgIGl0ZW1EYXRhLmNsYXNzTmFtZSxcclxuICAgICAgICAgIGluZGV4ID09PSBfdGhpcy5pdGVtcy5sZW5ndGggLSAxICA/ICdsYXN0JyAgICAgOiAnJyxcclxuICAgICAgICAgIGl0ZW1EYXRhLmRpc2FibGVkICAgICAgICAgICAgICAgICA/ICdkaXNhYmxlZCcgOiAnJyxcclxuICAgICAgICAgIGl0ZW1EYXRhLnNlbGVjdGVkICAgICAgICAgICAgICAgICA/ICdzZWxlY3RlZCcgOiAnJ1xyXG4gICAgICAgIF0pLFxyXG4gICAgICAgICQuaXNGdW5jdGlvbihpdGVtQnVpbGRlcilcclxuICAgICAgICAgID8gX3RoaXMudXRpbHMuZm9ybWF0KGl0ZW1CdWlsZGVyKGl0ZW1EYXRhLCB0aGlzLiRlbGVtZW50LCBpbmRleCksIGl0ZW1EYXRhKVxyXG4gICAgICAgICAgOiBfdGhpcy51dGlscy5mb3JtYXQoaXRlbUJ1aWxkZXIsIGZpbHRlcmVkSXRlbURhdGEpXHJcbiAgICAgICk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBSZW1vdmUgZXZlbnRzIG9uIHRoZSBlbGVtZW50cyAqL1xyXG4gICAgdW5iaW5kRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIF90aGlzLmVsZW1lbnRzLndyYXBwZXJcclxuICAgICAgICAuYWRkKF90aGlzLiRlbGVtZW50KVxyXG4gICAgICAgIC5hZGQoX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyKVxyXG4gICAgICAgIC5hZGQoX3RoaXMuZWxlbWVudHMuaW5wdXQpXHJcbiAgICAgICAgLm9mZihldmVudE5hbWVzcGFjZVN1ZmZpeCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBCaW5kIGV2ZW50cyBvbiB0aGUgZWxlbWVudHMgKi9cclxuICAgIGJpbmRFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLm9uKCdtb3VzZWVudGVyJyArIGV2ZW50TmFtZXNwYWNlU3VmZml4ICsgJyBtb3VzZWxlYXZlJyArIGV2ZW50TmFtZXNwYWNlU3VmZml4LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcyhfdGhpcy5jbGFzc2VzLmhvdmVyLCBlLnR5cGUgPT09ICdtb3VzZWVudGVyJyk7XHJcblxyXG4gICAgICAgIC8vIERlbGF5IGNsb3NlIGVmZmVjdCB3aGVuIG9wZW5PbkhvdmVyIGlzIHRydWVcclxuICAgICAgICBpZiAoIF90aGlzLm9wdGlvbnMub3Blbk9uSG92ZXIgKSB7XHJcbiAgICAgICAgICBjbGVhclRpbWVvdXQoX3RoaXMuY2xvc2VUaW1lcik7XHJcblxyXG4gICAgICAgICAgaWYgKCBlLnR5cGUgPT09ICdtb3VzZWxlYXZlJyApIHtcclxuICAgICAgICAgICAgX3RoaXMuY2xvc2VUaW1lciA9IHNldFRpbWVvdXQoJC5wcm94eShfdGhpcy5jbG9zZSwgX3RoaXMpLCBfdGhpcy5vcHRpb25zLmhvdmVySW50ZW50VGltZW91dCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfdGhpcy5vcGVuKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFRvZ2dsZSBvcGVuL2Nsb3NlXHJcbiAgICAgIF90aGlzLmVsZW1lbnRzLndyYXBwZXIub24oJ2NsaWNrJyArIGV2ZW50TmFtZXNwYWNlU3VmZml4LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgX3RoaXMuc3RhdGUub3BlbmVkID8gX3RoaXMuY2xvc2UoKSA6IF90aGlzLm9wZW4oZSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy8gVHJhbnNsYXRlIG9yaWdpbmFsIGVsZW1lbnQgZm9jdXMgZXZlbnQgdG8gZHVtbXkgaW5wdXQuXHJcbiAgICAgIC8vIERpc2FibGVkIG9uIG1vYmlsZSBkZXZpY2VzIGJlY2F1c2UgdGhlIGRlZmF1bHQgb3B0aW9uIGxpc3QgaXNuJ3RcclxuICAgICAgLy8gc2hvd24gZHVlIHRoZSBmYWN0IHRoYXQgaGlkZGVuIGlucHV0IGdldHMgZm9jdXNlZFxyXG4gICAgICBpZiAoICEoX3RoaXMub3B0aW9ucy5uYXRpdmVPbk1vYmlsZSAmJiBfdGhpcy51dGlscy5pc01vYmlsZSgpKSApIHtcclxuICAgICAgICBfdGhpcy4kZWxlbWVudC5vbignZm9jdXMnICsgZXZlbnROYW1lc3BhY2VTdWZmaXgsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgX3RoaXMuZWxlbWVudHMuaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMuaW5wdXRcclxuICAgICAgICAgIC5wcm9wKHsgdGFiaW5kZXg6IF90aGlzLm9yaWdpbmFsVGFiaW5kZXgsIGRpc2FibGVkOiBmYWxzZSB9KVxyXG4gICAgICAgICAgLm9uKCdrZXlkb3duJyArIGV2ZW50TmFtZXNwYWNlU3VmZml4LCAkLnByb3h5KF90aGlzLmhhbmRsZUtleXMsIF90aGlzKSlcclxuICAgICAgICAgIC5vbignZm9jdXNpbicgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIuYWRkQ2xhc3MoX3RoaXMuY2xhc3Nlcy5mb2N1cyk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcmV2ZW50IHRoZSBmbGlja2VyIHdoZW4gZm9jdXNpbmcgb3V0IGFuZCBiYWNrIGFnYWluIGluIHRoZSBicm93c2VyIHdpbmRvd1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50cy5pbnB1dC5vbmUoJ2JsdXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50cy5pbnB1dC5ibHVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCBfdGhpcy5vcHRpb25zLm9wZW5PbkZvY3VzICYmICFfdGhpcy5zdGF0ZS5vcGVuZWQgKSB7XHJcbiAgICAgICAgICAgICAgX3RoaXMub3BlbihlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5vbignZm9jdXNvdXQnICsgZXZlbnROYW1lc3BhY2VTdWZmaXgsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIucmVtb3ZlQ2xhc3MoX3RoaXMuY2xhc3Nlcy5mb2N1cyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLm9uKCdpbnB1dCBwcm9wZXJ0eWNoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdmFsID0gX3RoaXMuZWxlbWVudHMuaW5wdXQudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciBzZWFyY2hSZWdFeHAgPSBuZXcgUmVnRXhwKCdeJyArIF90aGlzLnV0aWxzLmVzY2FwZVJlZ0V4cCh2YWwpLCAnaScpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2xlYXIgc2VhcmNoXHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy5yZXNldFN0cik7XHJcbiAgICAgICAgICAgIF90aGlzLnJlc2V0U3RyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBfdGhpcy5lbGVtZW50cy5pbnB1dC52YWwoJycpO1xyXG4gICAgICAgICAgICB9LCBfdGhpcy5vcHRpb25zLmtleVNlYXJjaFRpbWVvdXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCB2YWwubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgIC8vIFNlYXJjaCBpbiBzZWxlY3Qgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICQuZWFjaChfdGhpcy5pdGVtcywgZnVuY3Rpb24oaSwgZWxtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxtLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzZWFyY2hSZWdFeHAudGVzdChlbG0udGV4dCkgfHwgc2VhcmNoUmVnRXhwLnRlc3QoZWxtLnNsdWcpKSB7XHJcbiAgICAgICAgICAgICAgICAgIF90aGlzLmhpZ2hsaWdodChpKTtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFlbG0uYWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBhbHRJdGVtcyA9IGVsbS5hbHQuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGFpID0gMDsgYWkgPCBhbHRJdGVtcy5sZW5ndGg7IGFpKyspIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKCFhbHRJdGVtc1thaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoUmVnRXhwLnRlc3QoYWx0SXRlbXNbYWldLnRyaW0oKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oaWdobGlnaHQoaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBfdGhpcy4kbGkub24oe1xyXG4gICAgICAgIC8vIFByZXZlbnQgPGlucHV0PiBibHVyIG9uIENocm9tZVxyXG4gICAgICAgIG1vdXNlZG93bjogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsaWNrOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIF90aGlzLnNlbGVjdCgkKHRoaXMpLmRhdGEoJ2luZGV4JykpO1xyXG5cclxuICAgICAgICAgIC8vIENocm9tZSBkb2Vzbid0IGNsb3NlIG9wdGlvbnMgYm94IGlmIHNlbGVjdCBpcyB3cmFwcGVkIHdpdGggYSBsYWJlbFxyXG4gICAgICAgICAgLy8gV2UgbmVlZCB0byAncmV0dXJuIGZhbHNlJyB0byBhdm9pZCB0aGF0XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCZWhhdmlvciB3aGVuIGtleWJvYXJkIGtleXMgaXMgcHJlc3NlZFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBlIC0gRXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUtleXM6IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyIGtleSA9IGUud2hpY2g7XHJcbiAgICAgIHZhciBrZXlzID0gX3RoaXMub3B0aW9ucy5rZXlzO1xyXG5cclxuICAgICAgdmFyIGlzUHJldktleSA9ICQuaW5BcnJheShrZXksIGtleXMucHJldmlvdXMpID4gLTE7XHJcbiAgICAgIHZhciBpc05leHRLZXkgPSAkLmluQXJyYXkoa2V5LCBrZXlzLm5leHQpID4gLTE7XHJcbiAgICAgIHZhciBpc1NlbGVjdEtleSA9ICQuaW5BcnJheShrZXksIGtleXMuc2VsZWN0KSA+IC0xO1xyXG4gICAgICB2YXIgaXNPcGVuS2V5ID0gJC5pbkFycmF5KGtleSwga2V5cy5vcGVuKSA+IC0xO1xyXG4gICAgICB2YXIgaWR4ID0gX3RoaXMuc3RhdGUuaGlnaGxpZ2h0ZWRJZHg7XHJcbiAgICAgIHZhciBpc0ZpcnN0T3JMYXN0SXRlbSA9IChpc1ByZXZLZXkgJiYgaWR4ID09PSAwKSB8fCAoaXNOZXh0S2V5ICYmIChpZHggKyAxKSA9PT0gX3RoaXMuaXRlbXMubGVuZ3RoKTtcclxuICAgICAgdmFyIGdvVG9JdGVtID0gMDtcclxuXHJcbiAgICAgIC8vIEVudGVyIC8gU3BhY2VcclxuICAgICAgaWYgKCBrZXkgPT09IDEzIHx8IGtleSA9PT0gMzIgKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBJZiBpdCdzIGEgZGlyZWN0aW9uYWwga2V5XHJcbiAgICAgIGlmICggaXNQcmV2S2V5IHx8IGlzTmV4dEtleSApIHtcclxuICAgICAgICBpZiAoICFfdGhpcy5vcHRpb25zLmFsbG93V3JhcCAmJiBpc0ZpcnN0T3JMYXN0SXRlbSApIHtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICggaXNQcmV2S2V5ICkge1xyXG4gICAgICAgICAgZ29Ub0l0ZW0gPSBfdGhpcy51dGlscy5wcmV2aW91c0VuYWJsZWRJdGVtKF90aGlzLmxvb2t1cEl0ZW1zLCBpZHgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCBpc05leHRLZXkgKSB7XHJcbiAgICAgICAgICBnb1RvSXRlbSA9IF90aGlzLnV0aWxzLm5leHRFbmFibGVkSXRlbShfdGhpcy5sb29rdXBJdGVtcywgaWR4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF90aGlzLmhpZ2hsaWdodChnb1RvSXRlbSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRhYiAvIEVudGVyIC8gRVNDXHJcbiAgICAgIGlmICggaXNTZWxlY3RLZXkgJiYgX3RoaXMuc3RhdGUub3BlbmVkICkge1xyXG4gICAgICAgIF90aGlzLnNlbGVjdChpZHgpO1xyXG5cclxuICAgICAgICBpZiAoICFfdGhpcy5zdGF0ZS5tdWx0aXBsZSB8fCAhX3RoaXMub3B0aW9ucy5tdWx0aXBsZS5rZWVwTWVudU9wZW4gKSB7XHJcbiAgICAgICAgICBfdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTcGFjZSAvIEVudGVyIC8gTGVmdCAvIFVwIC8gUmlnaHQgLyBEb3duXHJcbiAgICAgIGlmICggaXNPcGVuS2V5ICYmICFfdGhpcy5zdGF0ZS5vcGVuZWQgKSB7XHJcbiAgICAgICAgX3RoaXMub3BlbigpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBVcGRhdGUgdGhlIGl0ZW1zIG9iamVjdCAqL1xyXG4gICAgcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICBfdGhpcy5wb3B1bGF0ZSgpO1xyXG4gICAgICBfdGhpcy5hY3RpdmF0ZSgpO1xyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ1JlZnJlc2gnLCBfdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBTZXQgb3B0aW9ucyBib3ggd2lkdGgvaGVpZ2h0ICovXHJcbiAgICBzZXRPcHRpb25zRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAvLyBDYWxjdWxhdGUgb3B0aW9ucyBib3ggaGVpZ2h0XHJcbiAgICAgIC8vIFNldCBhIHRlbXBvcmFyeSBjbGFzcyBvbiB0aGUgaGlkZGVuIHBhcmVudCBvZiB0aGUgZWxlbWVudFxyXG4gICAgICB2YXIgaGlkZGVuQ2hpbGRyZW4gPSBfdGhpcy5lbGVtZW50cy5pdGVtcy5jbG9zZXN0KCc6dmlzaWJsZScpLmNoaWxkcmVuKCc6aGlkZGVuJykuYWRkQ2xhc3MoX3RoaXMuY2xhc3Nlcy50ZW1wc2hvdyk7XHJcbiAgICAgIHZhciBtYXhIZWlnaHQgPSBfdGhpcy5vcHRpb25zLm1heEhlaWdodDtcclxuICAgICAgdmFyIGl0ZW1zV2lkdGggPSBfdGhpcy5lbGVtZW50cy5pdGVtcy5vdXRlcldpZHRoKCk7XHJcbiAgICAgIHZhciB3cmFwcGVyV2lkdGggPSBfdGhpcy5lbGVtZW50cy53cmFwcGVyLm91dGVyV2lkdGgoKSAtIChpdGVtc1dpZHRoIC0gX3RoaXMuZWxlbWVudHMuaXRlbXMud2lkdGgoKSk7XHJcblxyXG4gICAgICAvLyBTZXQgdGhlIGRpbWVuc2lvbnMsIG1pbmltdW0gaXMgd3JhcHBlciB3aWR0aCwgZXhwYW5kIGZvciBsb25nIGl0ZW1zIGlmIG9wdGlvbiBpcyB0cnVlXHJcbiAgICAgIGlmICggIV90aGlzLm9wdGlvbnMuZXhwYW5kVG9JdGVtVGV4dCB8fCB3cmFwcGVyV2lkdGggPiBpdGVtc1dpZHRoICkge1xyXG4gICAgICAgIF90aGlzLmZpbmFsV2lkdGggPSB3cmFwcGVyV2lkdGg7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBzY3JvbGxiYXIgd2lkdGggaXMgaW5jbHVkZWRcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5pdGVtcy5jc3MoJ292ZXJmbG93JywgJ3Njcm9sbCcpO1xyXG5cclxuICAgICAgICAvLyBTZXQgYSByZWFsbHkgbG9uZyB3aWR0aCBmb3IgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyXHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLndpZHRoKDllNCk7XHJcbiAgICAgICAgX3RoaXMuZmluYWxXaWR0aCA9IF90aGlzLmVsZW1lbnRzLml0ZW1zLndpZHRoKCk7XHJcbiAgICAgICAgLy8gU2V0IHNjcm9sbCBiYXIgdG8gYXV0b1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLml0ZW1zLmNzcygnb3ZlcmZsb3cnLCAnJyk7XHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLndpZHRoKCcnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgX3RoaXMuZWxlbWVudHMuaXRlbXMud2lkdGgoX3RoaXMuZmluYWxXaWR0aCkuaGVpZ2h0KCkgPiBtYXhIZWlnaHQgJiYgX3RoaXMuZWxlbWVudHMuaXRlbXMuaGVpZ2h0KG1heEhlaWdodCk7XHJcblxyXG4gICAgICAvLyBSZW1vdmUgdGhlIHRlbXBvcmFyeSBjbGFzc1xyXG4gICAgICBoaWRkZW5DaGlsZHJlbi5yZW1vdmVDbGFzcyhfdGhpcy5jbGFzc2VzLnRlbXBzaG93KTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqIERldGVjdCBpZiB0aGUgb3B0aW9ucyBib3ggaXMgaW5zaWRlIHRoZSB3aW5kb3cgKi9cclxuICAgIGlzSW5WaWV3cG9ydDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICBpZiAoX3RoaXMub3B0aW9ucy5mb3JjZVJlbmRlckFib3ZlID09PSB0cnVlKSB7XHJcbiAgICAgICAgX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLmFkZENsYXNzKF90aGlzLmNsYXNzZXMuYWJvdmUpO1xyXG4gICAgICB9IGVsc2UgaWYgKF90aGlzLm9wdGlvbnMuZm9yY2VSZW5kZXJCZWxvdyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci5hZGRDbGFzcyhfdGhpcy5jbGFzc2VzLmJlbG93KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgc2Nyb2xsVG9wID0gJHdpbi5zY3JvbGxUb3AoKTtcclxuICAgICAgICB2YXIgd2luSGVpZ2h0ID0gJHdpbi5oZWlnaHQoKTtcclxuICAgICAgICB2YXIgdWlQb3NYID0gX3RoaXMuZWxlbWVudHMub3V0ZXJXcmFwcGVyLm9mZnNldCgpLnRvcDtcclxuICAgICAgICB2YXIgdWlIZWlnaHQgPSBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIub3V0ZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgdmFyIGZpdHNEb3duID0gKHVpUG9zWCArIHVpSGVpZ2h0ICsgX3RoaXMuaXRlbXNIZWlnaHQpIDw9IChzY3JvbGxUb3AgKyB3aW5IZWlnaHQpO1xyXG4gICAgICAgIHZhciBmaXRzQWJvdmUgPSAodWlQb3NYIC0gX3RoaXMuaXRlbXNIZWlnaHQpID4gc2Nyb2xsVG9wO1xyXG5cclxuICAgICAgICAvLyBJZiBpdCBkb2VzIG5vdCBmaXQgYmVsb3csIG9ubHkgcmVuZGVyIGl0XHJcbiAgICAgICAgLy8gYWJvdmUgaXQgZml0J3MgdGhlcmUuXHJcbiAgICAgICAgLy8gSXQncyBhY2NlcHRhYmxlIHRoYXQgdGhlIHVzZXIgbmVlZHMgdG9cclxuICAgICAgICAvLyBzY3JvbGwgdGhlIHZpZXdwb3J0IHRvIHNlZSB0aGUgY3V0IG9mZiBVSVxyXG4gICAgICAgIHZhciByZW5kZXJBYm92ZSA9ICFmaXRzRG93biAmJiBmaXRzQWJvdmU7XHJcbiAgICAgICAgdmFyIHJlbmRlckJlbG93ID0gIXJlbmRlckFib3ZlO1xyXG5cclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIudG9nZ2xlQ2xhc3MoX3RoaXMuY2xhc3Nlcy5hYm92ZSwgcmVuZGVyQWJvdmUpO1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLm91dGVyV3JhcHBlci50b2dnbGVDbGFzcyhfdGhpcy5jbGFzc2VzLmJlbG93LCByZW5kZXJCZWxvdyk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXRlY3QgaWYgY3VycmVudGx5IHNlbGVjdGVkIG9wdGlvbiBpcyB2aXNpYmxlIGFuZCBzY3JvbGwgdGhlIG9wdGlvbnMgYm94IHRvIHNob3cgaXRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcnxBcnJheX0gaW5kZXggLSBJbmRleCBvZiB0aGUgc2VsZWN0ZWQgaXRlbXNcclxuICAgICAqL1xyXG4gICAgZGV0ZWN0SXRlbVZpc2liaWxpdHk6IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgIHZhciAkZmlsdGVyZWRMaSA9IF90aGlzLiRsaS5maWx0ZXIoJ1tkYXRhLWluZGV4XScpO1xyXG5cclxuICAgICAgaWYgKCBfdGhpcy5zdGF0ZS5tdWx0aXBsZSApIHtcclxuICAgICAgICAvLyBJZiBpbmRleCBpcyBhbiBhcnJheSwgd2UgY2FuIGFzc3VtZSBhIG11bHRpcGxlIHNlbGVjdCBhbmQgd2VcclxuICAgICAgICAvLyB3YW50IHRvIHNjcm9sbCB0byB0aGUgdXBwZXJtb3N0IHNlbGVjdGVkIGl0ZW0hXHJcbiAgICAgICAgLy8gTWF0aC5taW4uYXBwbHkoTWF0aCwgaW5kZXgpIHJldHVybnMgdGhlIGxvd2VzdCBlbnRyeSBpbiBhbiBBcnJheS5cclxuICAgICAgICBpbmRleCA9ICgkLmlzQXJyYXkoaW5kZXgpICYmIGluZGV4Lmxlbmd0aCA9PT0gMCkgPyAwIDogaW5kZXg7XHJcbiAgICAgICAgaW5kZXggPSAkLmlzQXJyYXkoaW5kZXgpID8gTWF0aC5taW4uYXBwbHkoTWF0aCwgaW5kZXgpIDogaW5kZXg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHZhciBsaUhlaWdodCA9ICRmaWx0ZXJlZExpLmVxKGluZGV4KS5vdXRlckhlaWdodCgpO1xyXG4gICAgICB2YXIgbGlUb3AgPSAkZmlsdGVyZWRMaVtpbmRleF0ub2Zmc2V0VG9wO1xyXG4gICAgICB2YXIgaXRlbXNTY3JvbGxUb3AgPSBfdGhpcy5lbGVtZW50cy5pdGVtc1Njcm9sbC5zY3JvbGxUb3AoKTtcclxuICAgICAgdmFyIHNjcm9sbFQgPSBsaVRvcCArIGxpSGVpZ2h0ICogMjtcclxuXHJcbiAgICAgIF90aGlzLmVsZW1lbnRzLml0ZW1zU2Nyb2xsLnNjcm9sbFRvcChcclxuICAgICAgICBzY3JvbGxUID4gaXRlbXNTY3JvbGxUb3AgKyBfdGhpcy5pdGVtc0hlaWdodCA/IHNjcm9sbFQgLSBfdGhpcy5pdGVtc0hlaWdodCA6XHJcbiAgICAgICAgICBsaVRvcCAtIGxpSGVpZ2h0IDwgaXRlbXNTY3JvbGxUb3AgPyBsaVRvcCAtIGxpSGVpZ2h0IDpcclxuICAgICAgICAgICAgaXRlbXNTY3JvbGxUb3BcclxuICAgICAgKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPcGVuIHRoZSBzZWxlY3Qgb3B0aW9ucyBib3hcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlIC0gRXZlbnRcclxuICAgICAqL1xyXG4gICAgb3BlbjogZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgaWYgKCBfdGhpcy5vcHRpb25zLm5hdGl2ZU9uTW9iaWxlICYmIF90aGlzLnV0aWxzLmlzTW9iaWxlKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQmVmb3JlT3BlbicsIF90aGlzKTtcclxuXHJcbiAgICAgIGlmICggZSApIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgaWYgKF90aGlzLm9wdGlvbnMuc3RvcFByb3BhZ2F0aW9uKSB7XHJcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCBfdGhpcy5zdGF0ZS5lbmFibGVkICkge1xyXG4gICAgICAgIF90aGlzLnNldE9wdGlvbnNEaW1lbnNpb25zKCk7XHJcblxyXG4gICAgICAgIC8vIEZpbmQgYW55IG90aGVyIG9wZW5lZCBpbnN0YW5jZXMgb2Ygc2VsZWN0IGFuZCBjbG9zZSBpdFxyXG4gICAgICAgICQoJy4nICsgX3RoaXMuY2xhc3Nlcy5oaWRlc2VsZWN0LCAnLicgKyBfdGhpcy5jbGFzc2VzLm9wZW4pLmNoaWxkcmVuKClbcGx1Z2luTmFtZV0oJ2Nsb3NlJyk7XHJcblxyXG4gICAgICAgIF90aGlzLnN0YXRlLm9wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgX3RoaXMuaXRlbXNIZWlnaHQgPSBfdGhpcy5lbGVtZW50cy5pdGVtcy5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgIF90aGlzLml0ZW1zSW5uZXJIZWlnaHQgPSBfdGhpcy5lbGVtZW50cy5pdGVtcy5oZWlnaHQoKTtcclxuXHJcbiAgICAgICAgLy8gVG9nZ2xlIG9wdGlvbnMgYm94IHZpc2liaWxpdHlcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIuYWRkQ2xhc3MoX3RoaXMuY2xhc3Nlcy5vcGVuKTtcclxuXHJcbiAgICAgICAgLy8gR2l2ZSBkdW1teSBpbnB1dCBmb2N1c1xyXG4gICAgICAgIF90aGlzLmVsZW1lbnRzLmlucHV0LnZhbCgnJyk7XHJcbiAgICAgICAgaWYgKCBlICYmIGUudHlwZSAhPT0gJ2ZvY3VzaW4nICkge1xyXG4gICAgICAgICAgX3RoaXMuZWxlbWVudHMuaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERlbGF5ZWQgYmluZHMgZXZlbnRzIG9uIERvY3VtZW50IHRvIG1ha2UgbGFiZWwgY2xpY2tzIHdvcmtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJGRvY1xyXG4gICAgICAgICAgICAub24oJ2NsaWNrJyArIGV2ZW50TmFtZXNwYWNlU3VmZml4LCAkLnByb3h5KF90aGlzLmNsb3NlLCBfdGhpcykpXHJcbiAgICAgICAgICAgIC5vbignc2Nyb2xsJyArIGV2ZW50TmFtZXNwYWNlU3VmZml4LCAkLnByb3h5KF90aGlzLmlzSW5WaWV3cG9ydCwgX3RoaXMpKTtcclxuICAgICAgICB9LCAxKTtcclxuXHJcbiAgICAgICAgX3RoaXMuaXNJblZpZXdwb3J0KCk7XHJcblxyXG4gICAgICAgIC8vIFByZXZlbnQgd2luZG93IHNjcm9sbCB3aGVuIHVzaW5nIG1vdXNlIHdoZWVsIGluc2lkZSBpdGVtcyBib3hcclxuICAgICAgICBpZiAoIF90aGlzLm9wdGlvbnMucHJldmVudFdpbmRvd1Njcm9sbCApIHtcclxuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXHJcbiAgICAgICAgICAkZG9jLm9uKCdtb3VzZXdoZWVsJyArIGV2ZW50TmFtZXNwYWNlU3VmZml4ICsgJyBET01Nb3VzZVNjcm9sbCcgKyBldmVudE5hbWVzcGFjZVN1ZmZpeCwgJy4nICsgX3RoaXMuY2xhc3Nlcy5zY3JvbGwsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIG9yZ0V2ZW50ID0gZS5vcmlnaW5hbEV2ZW50O1xyXG4gICAgICAgICAgICB2YXIgc2Nyb2xsVG9wID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgdmFyIGRlbHRhWSA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoICdkZXRhaWwnICAgICAgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWSA9IG9yZ0V2ZW50LmRldGFpbCAqIC0xOyB9XHJcbiAgICAgICAgICAgIGlmICggJ3doZWVsRGVsdGEnICBpbiBvcmdFdmVudCApIHsgZGVsdGFZID0gb3JnRXZlbnQud2hlZWxEZWx0YTsgIH1cclxuICAgICAgICAgICAgaWYgKCAnd2hlZWxEZWx0YVknIGluIG9yZ0V2ZW50ICkgeyBkZWx0YVkgPSBvcmdFdmVudC53aGVlbERlbHRhWTsgfVxyXG4gICAgICAgICAgICBpZiAoICdkZWx0YVknICAgICAgaW4gb3JnRXZlbnQgKSB7IGRlbHRhWSA9IG9yZ0V2ZW50LmRlbHRhWSAqIC0xOyB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIHNjcm9sbFRvcCA9PT0gKHRoaXMuc2Nyb2xsSGVpZ2h0IC0gX3RoaXMuaXRlbXNJbm5lckhlaWdodCkgJiYgZGVsdGFZIDwgMCB8fCBzY3JvbGxUb3AgPT09IDAgJiYgZGVsdGFZID4gMCApIHtcclxuICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3RoaXMuZGV0ZWN0SXRlbVZpc2liaWxpdHkoX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHgpO1xyXG5cclxuICAgICAgICBfdGhpcy5oaWdobGlnaHQoX3RoaXMuc3RhdGUubXVsdGlwbGUgPyAtMSA6IF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4KTtcclxuXHJcbiAgICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdPcGVuJywgX3RoaXMpO1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKiBDbG9zZSB0aGUgc2VsZWN0IG9wdGlvbnMgYm94ICovXHJcbiAgICBjbG9zZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0JlZm9yZUNsb3NlJywgX3RoaXMpO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIGN1c3RvbSBldmVudHMgb24gZG9jdW1lbnRcclxuICAgICAgJGRvYy5vZmYoZXZlbnROYW1lc3BhY2VTdWZmaXgpO1xyXG5cclxuICAgICAgLy8gUmVtb3ZlIHZpc2libGUgY2xhc3MgdG8gaGlkZSBvcHRpb25zIGJveFxyXG4gICAgICBfdGhpcy5lbGVtZW50cy5vdXRlcldyYXBwZXIucmVtb3ZlQ2xhc3MoX3RoaXMuY2xhc3Nlcy5vcGVuKTtcclxuXHJcbiAgICAgIF90aGlzLnN0YXRlLm9wZW5lZCA9IGZhbHNlO1xyXG5cclxuICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdDbG9zZScsIF90aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqIFNlbGVjdCBjdXJyZW50IG9wdGlvbiBhbmQgY2hhbmdlIHRoZSBsYWJlbCAqL1xyXG4gICAgY2hhbmdlOiBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQmVmb3JlQ2hhbmdlJywgX3RoaXMpO1xyXG5cclxuICAgICAgaWYgKCBfdGhpcy5zdGF0ZS5tdWx0aXBsZSApIHtcclxuICAgICAgICAvLyBSZXNldCBvbGQgc2VsZWN0ZWRcclxuICAgICAgICAkLmVhY2goX3RoaXMubG9va3VwSXRlbXMsIGZ1bmN0aW9uKGlkeCkge1xyXG4gICAgICAgICAgX3RoaXMubG9va3VwSXRlbXNbaWR4XS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgX3RoaXMuJGVsZW1lbnQuZmluZCgnb3B0aW9uJykucHJvcCgnc2VsZWN0ZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFNldCBuZXcgc2VsZWN0ZWRcclxuICAgICAgICAkLmVhY2goX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHgsIGZ1bmN0aW9uKGlkeCwgdmFsdWUpIHtcclxuICAgICAgICAgIF90aGlzLmxvb2t1cEl0ZW1zW3ZhbHVlXS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICBfdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb24nKS5lcSh2YWx1ZSkucHJvcCgnc2VsZWN0ZWQnLCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgX3RoaXMuc3RhdGUuY3VyclZhbHVlID0gX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHg7XHJcblxyXG4gICAgICAgIF90aGlzLnNldExhYmVsKCk7XHJcblxyXG4gICAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQ2hhbmdlJywgX3RoaXMpO1xyXG4gICAgICB9IGVsc2UgaWYgKCBfdGhpcy5zdGF0ZS5jdXJyVmFsdWUgIT09IF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4ICkge1xyXG4gICAgICAgIC8vIEFwcGx5IGNoYW5nZWQgdmFsdWUgdG8gb3JpZ2luYWwgc2VsZWN0XHJcbiAgICAgICAgX3RoaXMuJGVsZW1lbnRcclxuICAgICAgICAgIC5wcm9wKCdzZWxlY3RlZEluZGV4JywgX3RoaXMuc3RhdGUuY3VyclZhbHVlID0gX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHgpXHJcbiAgICAgICAgICAuZGF0YSgndmFsdWUnLCBfdGhpcy5sb29rdXBJdGVtc1tfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeF0udGV4dCk7XHJcblxyXG4gICAgICAgIC8vIENoYW5nZSBsYWJlbCB0ZXh0XHJcbiAgICAgICAgX3RoaXMuc2V0TGFiZWwoKTtcclxuXHJcbiAgICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdDaGFuZ2UnLCBfdGhpcyk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIaWdobGlnaHQgb3B0aW9uXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBJbmRleCBvZiB0aGUgb3B0aW9ucyB0aGF0IHdpbGwgYmUgaGlnaGxpZ2h0ZWRcclxuICAgICAqL1xyXG4gICAgaGlnaGxpZ2h0OiBmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICB2YXIgJGZpbHRlcmVkTGkgPSBfdGhpcy4kbGkuZmlsdGVyKCdbZGF0YS1pbmRleF0nKS5yZW1vdmVDbGFzcygnaGlnaGxpZ2h0ZWQnKTtcclxuXHJcbiAgICAgIF90aGlzLnV0aWxzLnRyaWdnZXJDYWxsYmFjaygnQmVmb3JlSGlnaGxpZ2h0JywgX3RoaXMpO1xyXG5cclxuICAgICAgLy8gUGFyYW1ldGVyIGluZGV4IGlzIHJlcXVpcmVkIGFuZCBzaG91bGQgbm90IGJlIGEgZGlzYWJsZWQgaXRlbVxyXG4gICAgICBpZiAoIGluZGV4ID09PSB1bmRlZmluZWQgfHwgaW5kZXggPT09IC0xIHx8IF90aGlzLmxvb2t1cEl0ZW1zW2luZGV4XS5kaXNhYmxlZCApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRmaWx0ZXJlZExpXHJcbiAgICAgICAgLmVxKF90aGlzLnN0YXRlLmhpZ2hsaWdodGVkSWR4ID0gaW5kZXgpXHJcbiAgICAgICAgLmFkZENsYXNzKCdoaWdobGlnaHRlZCcpO1xyXG5cclxuICAgICAgX3RoaXMuZGV0ZWN0SXRlbVZpc2liaWxpdHkoaW5kZXgpO1xyXG5cclxuICAgICAgX3RoaXMudXRpbHMudHJpZ2dlckNhbGxiYWNrKCdIaWdobGlnaHQnLCBfdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VsZWN0IG9wdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIEluZGV4IG9mIHRoZSBvcHRpb24gdGhhdCB3aWxsIGJlIHNlbGVjdGVkXHJcbiAgICAgKi9cclxuICAgIHNlbGVjdDogZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgdmFyICRmaWx0ZXJlZExpID0gX3RoaXMuJGxpLmZpbHRlcignW2RhdGEtaW5kZXhdJyk7XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ0JlZm9yZVNlbGVjdCcsIF90aGlzLCBpbmRleCk7XHJcblxyXG4gICAgICAvLyBQYXJhbWV0ZXIgaW5kZXggaXMgcmVxdWlyZWQgYW5kIHNob3VsZCBub3QgYmUgYSBkaXNhYmxlZCBpdGVtXHJcbiAgICAgIGlmICggaW5kZXggPT09IHVuZGVmaW5lZCB8fCBpbmRleCA9PT0gLTEgfHwgX3RoaXMubG9va3VwSXRlbXNbaW5kZXhdLmRpc2FibGVkICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCBfdGhpcy5zdGF0ZS5tdWx0aXBsZSApIHtcclxuICAgICAgICAvLyBNYWtlIHN1cmUgc2VsZWN0ZWRJZHggaXMgYW4gYXJyYXlcclxuICAgICAgICBfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeCA9ICQuaXNBcnJheShfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeCkgPyBfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeCA6IFtfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeF07XHJcblxyXG4gICAgICAgIHZhciBoYXNTZWxlY3RlZEluZGV4ID0gJC5pbkFycmF5KGluZGV4LCBfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeCk7XHJcbiAgICAgICAgaWYgKCBoYXNTZWxlY3RlZEluZGV4ICE9PSAtMSApIHtcclxuICAgICAgICAgIF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4LnNwbGljZShoYXNTZWxlY3RlZEluZGV4LCAxKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgX3RoaXMuc3RhdGUuc2VsZWN0ZWRJZHgucHVzaChpbmRleCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkZmlsdGVyZWRMaVxyXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpXHJcbiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLmluQXJyYXkoaW5kZXgsIF90aGlzLnN0YXRlLnNlbGVjdGVkSWR4KSAhPT0gLTE7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICRmaWx0ZXJlZExpXHJcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJylcclxuICAgICAgICAgIC5lcShfdGhpcy5zdGF0ZS5zZWxlY3RlZElkeCA9IGluZGV4KVxyXG4gICAgICAgICAgLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoICFfdGhpcy5zdGF0ZS5tdWx0aXBsZSB8fCAhX3RoaXMub3B0aW9ucy5tdWx0aXBsZS5rZWVwTWVudU9wZW4gKSB7XHJcbiAgICAgICAgX3RoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgX3RoaXMuY2hhbmdlKCk7XHJcblxyXG4gICAgICBfdGhpcy51dGlscy50cmlnZ2VyQ2FsbGJhY2soJ1NlbGVjdCcsIF90aGlzLCBpbmRleCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVW5iaW5kIGFuZCByZW1vdmVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHByZXNlcnZlRGF0YSAtIENoZWNrIGlmIHRoZSBkYXRhIG9uIHRoZSBlbGVtZW50IHNob3VsZCBiZSByZW1vdmVkIHRvb1xyXG4gICAgICovXHJcbiAgICBkZXN0cm95OiBmdW5jdGlvbihwcmVzZXJ2ZURhdGEpIHtcclxuICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgIGlmICggX3RoaXMuc3RhdGUgJiYgX3RoaXMuc3RhdGUuZW5hYmxlZCApIHtcclxuICAgICAgICBfdGhpcy5lbGVtZW50cy5pdGVtcy5hZGQoX3RoaXMuZWxlbWVudHMud3JhcHBlcikuYWRkKF90aGlzLmVsZW1lbnRzLmlucHV0KS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgaWYgKCAhcHJlc2VydmVEYXRhICkge1xyXG4gICAgICAgICAgX3RoaXMuJGVsZW1lbnQucmVtb3ZlRGF0YShwbHVnaW5OYW1lKS5yZW1vdmVEYXRhKCd2YWx1ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgX3RoaXMuJGVsZW1lbnQucHJvcCgndGFiaW5kZXgnLCBfdGhpcy5vcmlnaW5hbFRhYmluZGV4KS5vZmYoZXZlbnROYW1lc3BhY2VTdWZmaXgpLm9mZihfdGhpcy5ldmVudFRyaWdnZXJzKS51bndyYXAoKS51bndyYXAoKTtcclxuXHJcbiAgICAgICAgX3RoaXMuc3RhdGUuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gQSByZWFsbHkgbGlnaHR3ZWlnaHQgcGx1Z2luIHdyYXBwZXIgYXJvdW5kIHRoZSBjb25zdHJ1Y3RvcixcclxuICAvLyBwcmV2ZW50aW5nIGFnYWluc3QgbXVsdGlwbGUgaW5zdGFudGlhdGlvbnNcclxuICAkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24oYXJncykge1xyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGRhdGEgPSAkLmRhdGEodGhpcywgcGx1Z2luTmFtZSk7XHJcblxyXG4gICAgICBpZiAoIGRhdGEgJiYgIWRhdGEuZGlzYWJsZU9uTW9iaWxlICkge1xyXG4gICAgICAgICh0eXBlb2YgYXJncyA9PT0gJ3N0cmluZycgJiYgZGF0YVthcmdzXSkgPyBkYXRhW2FyZ3NdKCkgOiBkYXRhLmluaXQoYXJncyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJC5kYXRhKHRoaXMsIHBsdWdpbk5hbWUsIG5ldyBTZWxlY3RyaWModGhpcywgYXJncykpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBEZWZhdWx0IHBsdWdpbiBvcHRpb25zXHJcbiAgICpcclxuICAgKiBAdHlwZSB7b2JqZWN0fVxyXG4gICAqL1xyXG4gICQuZm5bcGx1Z2luTmFtZV0uZGVmYXVsdHMgPSB7XHJcbiAgICBvbkNoYW5nZSAgICAgICAgICAgICA6IGZ1bmN0aW9uKGVsbSkgeyAkKGVsbSkuY2hhbmdlKCk7IH0sXHJcbiAgICBtYXhIZWlnaHQgICAgICAgICAgICA6IDMwMCxcclxuICAgIGtleVNlYXJjaFRpbWVvdXQgICAgIDogNTAwLFxyXG4gICAgYXJyb3dCdXR0b25NYXJrdXAgICAgOiAnPGIgY2xhc3M9XCJidXR0b25cIj4mI3gyNWJlOzwvYj4nLFxyXG4gICAgZGlzYWJsZU9uTW9iaWxlICAgICAgOiBmYWxzZSxcclxuICAgIG5hdGl2ZU9uTW9iaWxlICAgICAgIDogdHJ1ZSxcclxuICAgIG9wZW5PbkZvY3VzICAgICAgICAgIDogdHJ1ZSxcclxuICAgIG9wZW5PbkhvdmVyICAgICAgICAgIDogZmFsc2UsXHJcbiAgICBob3ZlckludGVudFRpbWVvdXQgICA6IDUwMCxcclxuICAgIGV4cGFuZFRvSXRlbVRleHQgICAgIDogZmFsc2UsXHJcbiAgICByZXNwb25zaXZlICAgICAgICAgICA6IGZhbHNlLFxyXG4gICAgcHJldmVudFdpbmRvd1Njcm9sbCAgOiB0cnVlLFxyXG4gICAgaW5oZXJpdE9yaWdpbmFsV2lkdGggOiBmYWxzZSxcclxuICAgIGFsbG93V3JhcCAgICAgICAgICAgIDogdHJ1ZSxcclxuICAgIGZvcmNlUmVuZGVyQWJvdmUgICAgIDogZmFsc2UsXHJcbiAgICBmb3JjZVJlbmRlckJlbG93ICAgICA6IGZhbHNlLFxyXG4gICAgc3RvcFByb3BhZ2F0aW9uICAgICAgOiB0cnVlLFxyXG4gICAgb3B0aW9uc0l0ZW1CdWlsZGVyICAgOiAne3RleHR9JywgLy8gZnVuY3Rpb24oaXRlbURhdGEsIGVsZW1lbnQsIGluZGV4KVxyXG4gICAgbGFiZWxCdWlsZGVyICAgICAgICAgOiAne3RleHR9JywgLy8gZnVuY3Rpb24oY3Vyckl0ZW0pXHJcbiAgICBsaXN0QnVpbGRlciAgICAgICAgICA6IGZhbHNlLCAgICAvLyBmdW5jdGlvbihpdGVtcylcclxuICAgIGtleXMgICAgICAgICAgICAgICAgIDoge1xyXG4gICAgICBwcmV2aW91cyA6IFszNywgMzhdLCAgICAgICAgICAgICAgICAgLy8gTGVmdCAvIFVwXHJcbiAgICAgIG5leHQgICAgIDogWzM5LCA0MF0sICAgICAgICAgICAgICAgICAvLyBSaWdodCAvIERvd25cclxuICAgICAgc2VsZWN0ICAgOiBbOSwgMTMsIDI3XSwgICAgICAgICAgICAgIC8vIFRhYiAvIEVudGVyIC8gRXNjYXBlXHJcbiAgICAgIG9wZW4gICAgIDogWzEzLCAzMiwgMzcsIDM4LCAzOSwgNDBdLCAvLyBFbnRlciAvIFNwYWNlIC8gTGVmdCAvIFVwIC8gUmlnaHQgLyBEb3duXHJcbiAgICAgIGNsb3NlICAgIDogWzksIDI3XSAgICAgICAgICAgICAgICAgICAvLyBUYWIgLyBFc2NhcGVcclxuICAgIH0sXHJcbiAgICBjdXN0b21DbGFzcyAgICAgICAgICA6IHtcclxuICAgICAgcHJlZml4OiBwbHVnaW5OYW1lLFxyXG4gICAgICBjYW1lbENhc2U6IGZhbHNlXHJcbiAgICB9LFxyXG4gICAgbXVsdGlwbGUgICAgICAgICAgICAgIDoge1xyXG4gICAgICBzZXBhcmF0b3I6ICcsICcsXHJcbiAgICAgIGtlZXBNZW51T3BlbjogdHJ1ZSxcclxuICAgICAgbWF4TGFiZWxFbnRyaWVzOiBmYWxzZVxyXG4gICAgfVxyXG4gIH07XHJcbn0pKTsiXX0=
